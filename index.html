<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">

<style>
:root{
--brightness:1;
--fontSize:16px;
--gridColor:#e6b3c1;
--photoRotate:2deg;
--photoShadow:0 10px 20px rgba(0,0,0,.3);
}

*{box-sizing:border-box}

body{
margin:0;
font-family:Montserrat;
font-size:var(--fontSize);
filter:brightness(var(--brightness));
min-height:100vh;
background:
linear-gradient(#fff 24px,var(--gridColor) 25px),
linear-gradient(90deg,#fff 24px,var(--gridColor) 25px);
background-size:25px 25px;
padding-top:60px;
}

.lock{
position:fixed;inset:0;
background:#000;
display:flex;align-items:center;justify-content:center;
z-index:1000
}
.lock input{
padding:15px;font-size:18px;border-radius:12px;border:none
}

.menu-btn{
position:fixed;top:15px;left:15px;
font-size:26px;background:none;border:none;
cursor:pointer;z-index:999
}

.menu{
position:fixed;top:0;left:-270px;
width:260px;height:100%;
background:#fff;padding:20px;
transition:.3s;z-index:998;overflow:auto
}
.menu.open{left:0}

.menu h3{margin-top:0}
.menu label{font-size:13px}
.menu input{width:100%;margin-bottom:10px}

.app{
width:95%;max-width:900px;
margin:auto;
background:rgba(255,255,255,.8);
border-radius:20px;
padding:20px;
box-shadow:0 15px 30px rgba(0,0,0,.2)
}

.header{
text-align:center;
font-family:Pacifico;
font-size:26px
}

#counter{
font-family:Montserrat;
font-size:16px;
margin-bottom:15px
}

.gallery{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:15px;
overflow-y:auto
}

.photo{
background:#fff;
padding:8px;
border-radius:6px;
box-shadow:var(--photoShadow);
transform:rotate(calc(var(--photoRotate) * -1));
position:relative
}
.photo:nth-child(even){
transform:rotate(var(--photoRotate))
}

.photo::before{
content:"üìé";
position:absolute;
top:-20px;
left:6px;
font-size:22px
}

.photo img{
width:100%;
aspect-ratio:1/1;
object-fit:cover;
cursor:pointer
}

.photo textarea{
width:100%;
border:none;
resize:none;
font-size:12px;
background:transparent
}

.actions{
display:flex;justify-content:space-between
}
.actions button{
border:none;background:none;
cursor:pointer;font-size:16px
}

.overlay{
position:fixed;inset:0;
background:rgba(0,0,0,.9);
display:flex;align-items:center;justify-content:center;
z-index:2000
}
.overlay img{max-width:90%;max-height:90%}
</style>
</head>

<body>

<div class="lock" id="lock">
<input type="password" placeholder="–ü–∞—Ä–æ–ª—å ‚ù§Ô∏è" onkeydown="checkPass(event)">
</div>

<button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>

<div class="menu" id="menu">
<h3>‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>

<label>üîÜ –Ø—Ä–∫–æ—Å—Ç—å</label>
<input type="range" min="0.7" max="1.2" step="0.05" oninput="setBrightness(this.value)">

<label>üî§ –†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞</label>
<input type="range" min="14" max="20" step="1" oninput="setFont(this.value)">

<label>üé® –¶–≤–µ—Ç –∫–ª–µ—Ç–æ–∫</label>
<input type="color" oninput="setGrid(this.value)">

<label>üìé –ù–∞–∫–ª–æ–Ω —Ñ–æ—Ç–æ</label>
<input type="range" min="0" max="5" step="0.5" oninput="setRotate(this.value)">

<label>üå´ –¢–µ–Ω—å —Ñ–æ—Ç–æ</label>
<input type="range" min="5" max="30" step="1" oninput="setShadow(this.value)">

<hr>
<button onclick="resetSettings()">‚ôª –°–±—Ä–æ—Å</button>
<hr>

<button onclick="showAll()">üì∏ –í—Å–µ</button>
<button onclick="showFav()">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
<button onclick="askHidden()">üîê –°–∫—Ä—ã—Ç—ã–µ</button>
</div>

<div class="app" id="app" style="display:none">

<div class="header">
–ê–¥–µ–ª–∞–∏–¥–∞ + –°–∞—à–∞ = –≤–µ—á–Ω–æ—Å—Ç—å ‚úçÔ∏è
</div>

<div id="counter"></div>

<input type="file" multiple accept="image/*" onchange="addPhotos(event)">

<div class="gallery" id="gallery"></div>

</div>

<script>
const PASS="love", HIDDEN="secret";
const lock=document.getElementById("lock");
const app=document.getElementById("app");
const gallery=document.getElementById("gallery");
const menu=document.getElementById("menu");

function checkPass(e){
if(e.key==="Enter"&&e.target.value===PASS){
lock.style.display="none";
app.style.display="block";
}
}

function toggleMenu(){menu.classList.toggle("open")}

/* –°–ß–Å–¢–ß–ò–ö */
const start=new Date(2024,7,5);
setInterval(()=>{
const d=Math.floor((Date.now()-start)/86400000);
counter.innerText=`–ú—ã –≤–º–µ—Å—Ç–µ ${d} –¥–Ω–µ–π ‚ù§Ô∏è`;
},1000);

/* –ù–ê–°–¢–†–û–ô–ö–ò */
function setBrightness(v){document.documentElement.style.setProperty('--brightness',v)}
function setFont(v){document.documentElement.style.setProperty('--fontSize',v+'px')}
function setGrid(v){document.documentElement.style.setProperty('--gridColor',v)}
function setRotate(v){document.documentElement.style.setProperty('--photoRotate',v+'deg')}
function setShadow(v){
document.documentElement.style.setProperty('--photoShadow',`0 ${v}px ${v*2}px rgba(0,0,0,.3)`)
}
function resetSettings(){
setBrightness(1);setFont(16);setGrid('#e6b3c1');setRotate(2);setShadow(10)
}

/* –ì–ê–õ–ï–†–ï–Ø ‚Äî –°–¢–ê–†–´–ô –ê–õ–ì–û–†–ò–¢–ú */
let mode="all";
let photos=JSON.parse(localStorage.photos||"[]");
function save(){localStorage.photos=JSON.stringify(photos)}

function addPhotos(e){
for(let f of e.target.files){
const r=new FileReader();
r.onload=x=>{
photos.push({src:x.target.result,text:"",fav:false,hidden:false});
save();render();
};
r.readAsDataURL(f);
}
}

function render(){
gallery.innerHTML="";
photos.forEach((p,i)=>{
if(mode==="fav"&&!p.fav)return;
if(mode==="hidden"&&!p.hidden)return;
if(mode==="all"&&p.hidden)return;

const d=document.createElement("div");
d.className="photo";
d.innerHTML=`
<img src="${p.src}" onclick="openImg(${i})">
<textarea placeholder="–ü–æ–¥–ø–∏—Å—å..." oninput="photos[${i}].text=this.value;save()">${p.text}</textarea>
<div class="actions">
<button onclick="toggleFav(${i})">${p.fav?"‚≠ê":"‚òÜ"}</button>
<button onclick="toggleHidden(${i})">üôà</button>
<button onclick="removePhoto(${i})">‚úñ</button>
</div>`;
gallery.appendChild(d);
});
}

function openImg(i){
const o=document.createElement("div");
o.className="overlay";
o.onclick=()=>o.remove();
o.innerHTML=`<img src="${photos[i].src}">`;
document.body.appendChild(o);
}

function toggleFav(i){photos[i].fav=!photos[i].fav;save();render()}
function toggleHidden(i){photos[i].hidden=!photos[i].hidden;save();render()}
function removePhoto(i){if(confirm("–£–¥–∞–ª–∏—Ç—å?")){photos.splice(i,1);save();render()}}
function showFav(){mode="fav";render()}
function showAll(){mode="all";render()}
function askHidden(){if(prompt("–ü–∞—Ä–æ–ª—å")==HIDDEN){mode="hidden";render()}}

render();
</script>

</body>
</html>



















