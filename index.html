<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ë–æ–º–∂–∞—Ä–∞ ‚Äî –ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—Ö–∞!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {margin:0;font-family:Arial,sans-serif;background:linear-gradient(135deg,#0f172a,#020617);color:#e5e7eb;display:flex;justify-content:center;padding:10px;}
.container {width:100%;max-width:800px;background:#111827;padding:15px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,0.6);}
h1,h3,h4{margin:5px 0;}
.stats div,#inventory div,#achievements div{background:#1f2937;padding:8px;border-radius:10px;margin:4px 0;display:flex;align-items:center;justify-content:space-between;}
.stats span.progress{display:inline-block;height:8px;border-radius:4px;background:#16a34a;margin-left:6px;flex-grow:1;transition: width 0.3s ease;}
button{padding:10px;margin:4px;border:none;border-radius:8px;background:#22c55e;color:#052e16;cursor:pointer;display:flex;align-items:center;width:100%;justify-content:center;transition:0.2s;}
button:hover{background:#16a34a;}
button img{width:24px;height:24px;margin-right:6px;}
.map {display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:6px;margin-bottom:10px;}
#story{min-height:80px;margin-bottom:10px;background:#1f2937;padding:10px;border-radius:12px;font-size:16px;line-height:1.4;position:relative;}
.story-notify{position:absolute;top:-25px;left:0;width:100%;text-align:center;color:#facc15;font-weight:bold;animation:flashText 1s;}
@keyframes flashText{0%,100%{opacity:0;}50%{opacity:1;}}
.animated{animation:flash 0.4s ease;}
@keyframes flash{0%{background-color:#facc15;}50%{background-color:#1f2937;}100%{background-color:#facc15;}}
.inventory img{width:24px;height:24px;margin-right:6px;}
.actions,#shopItems{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:6px;max-height:250px;overflow-y:auto;margin-bottom:10px;}
</style>
</head>
<body>
<div class="container">
<h1>üßπ –ë–æ–º–∂–∞—Ä–∞ ‚Äî –ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—Ö–∞!</h1>

<div class="stats">
<h3>–ü–µ—Ä—Å–æ–Ω–∞–∂</h3>
<div>üí∞ <span>–î–µ–Ω—å–≥–∏:</span> <span id="money">0</span> –≥—Ä–Ω | $: <span id="usd">0</span> | –ö—É—Ä—Å: <span id="rate">42.50</span> –≥—Ä–Ω/$</div>
<div>‚ù§Ô∏è <span>–ó–¥–æ—Ä–æ–≤—å–µ:</span> <span id="health">100</span> <span class="progress" id="healthBar"></span></div>
<div>üçó <span>–°—ã—Ç–æ—Å—Ç—å:</span> <span id="satiety">100</span> <span class="progress" id="satietyBar"></span></div>
<div>üòä <span>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:</span> <span id="mood">100</span> <span class="progress" id="moodBar"></span></div>
<div>‚≠ê <span>–†–µ–ø—É—Ç–∞—Ü–∏—è:</span> <span id="rep">0</span></div>
<div>‚ö° <span>–û–ø—ã—Ç:</span> <span id="xp">0</span> | –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span> <span class="progress" id="xpBar"></span></div>
<div>üí™ <span>–°–∏–ª–∞:</span> <span id="str">5</span> | üß† <span>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç:</span> <span id="int">5</span> | ü§ù <span>–•–∞—Ä–∏–∑–º–∞:</span> <span id="cha">5</span></div>
<div>üïí <span>–î–µ–Ω—å:</span> <span id="day">1</span> | <span>–ú–µ—Å—è—Ü:</span> <span id="month">1</span></div>
</div>

<div id="story"></div>

<div class="map">
<button onclick="goTo('home')">üè† –î–æ–º</button>
<button onclick="goTo('work')">üíº –†–∞–±–æ—Ç–∞</button>
<button onclick="goTo('shop')">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
<button onclick="goTo('school')">üè´ –®–∫–æ–ª–∞</button>
<button onclick="goTo('park')">üå≥ –ü–∞—Ä–∫</button>
<button onclick="goTo('crime')">üïµÔ∏è –ö—Ä–∏–º–∏–Ω–∞–ª</button>
<button onclick="goTo('hospital')">üè• –ë–æ–ª—å–Ω–∏—Ü–∞</button>
<button onclick="exchangeCurrencyUI()">üí± –û–±–º–µ–Ω–Ω–∏–∫</button>
<button onclick="recycle()">‚ôªÔ∏è –°–¥–∞—Ç—å –±—É—Ç—ã–ª–∫–∏</button>
<button onclick="resetGame()" style="background:#f87171;">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
</div>

<div class="actions" id="actions"></div>
<div class="actions" id="shopItems"></div>
<div class="inventory" id="inventory"><h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3></div>
<div id="achievements"><h3>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3></div>
<button id="restart" onclick="startGame()" style="display:none;">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>

<script>
// ---------- STATE ----------
let state;
const achievements = new Set();
let rate = 42.5;

const properties = { "–ü–∞–ª–∞—Ç–∫–∞":500, "–ß–µ—Ä–¥–∞–∫":200, "–ö–≤–∞—Ä—Ç–∏—Ä–∞":1000, "–î–æ–º":40000, "–ü–µ–Ω—Ç—Ö–∞—É—Å":200000 };
const transport = { "–ö—Ä–æ—Å—Å–æ–≤–∫–∏":0, "–í–µ–ª–æ—Å–∏–ø–µ–¥":500, "–°–∫—É—Ç–µ—Ä":2000, "–ú–∞—à–∏–Ω–∞":10000, "–°–ø–æ—Ä—Ç–∫–∞—Ä":50000, "–í–µ—Ä—Ç–æ–ª–µ—Ç":200000 };
const education = { "–ê–∑–±—É–∫–∞":1000, "–ë—É–∫–≤–∞—Ä–∏–∫":5000, "–®–∫–æ–ª–∞":10000, "–ö–æ–ª–ª–µ–¥–∂":15000, "–£–Ω–∏–≤–µ—Ä":20000, "–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞":30000, "–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞":50000 };

const jobs = [
{name:"–î–≤–æ—Ä–Ω–∏–∫", salary:50, level:1, property:null, transport:null, education:"–ê–∑–±—É–∫–∞"},
{name:"–ü–æ—á—Ç–∞–ª—å–æ–Ω", salary:100, level:1, property:null, transport:null, education:"–ë—É–∫–≤–∞—Ä–∏–∫"},
{name:"–¢–∞–∫—Å–∏—Å—Ç", salary:200, level:2, property:null, transport:"–ú–∞—à–∏–Ω–∞", education:"–®–∫–æ–ª–∞"},
{name:"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç", salary:1000, level:5, property:null, transport:"–ú–∞—à–∏–Ω–∞", education:"–£–Ω–∏–≤–µ—Ä"},
{name:"–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç", salary:10000, level:10, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–í–µ—Ä—Ç–æ–ª–µ—Ç", education:"–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞"}
];

// ---------- START ----------
function startGame(){
  const savedState = localStorage.getItem('gameState');
  const savedAchievements = localStorage.getItem('achievements');

  if(savedState){
    state = JSON.parse(savedState);
    if(savedAchievements){
      const arr = JSON.parse(savedAchievements);
      achievements.clear();
      arr.forEach(a => achievements.add(a));
    }
    showStory("–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏...");
  } else {
    state={money:50,usd:0,health:100,satiety:100,mood:100,rep:0,xp:0,level:1,str:5,int:5,cha:5,day:1,month:1,inventory:[],inPrison:0};
    achievements.clear();
    showStory("–ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∂–∏–∑–Ω—å! –í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é.");
  }
  renderAchievements();
  updateUI();
  randomRate();
}

// ---------- RESET ----------
function resetGame(){
  localStorage.removeItem('gameState');
  localStorage.removeItem('achievements');
  achievements.clear();
  startGame();
}

// ---------- SAVE ----------
function saveGame(){
  localStorage.setItem('gameState', JSON.stringify(state));
  localStorage.setItem('achievements', JSON.stringify(Array.from(achievements)));
}

// ---------- UI ----------
function updateUI(){
  document.getElementById("money").textContent=state.money;
  document.getElementById("usd").textContent=state.usd.toFixed(2);
  document.getElementById("rate").textContent=rate.toFixed(2);
  document.getElementById("health").textContent=state.health;
  document.getElementById("satiety").textContent=state.satiety;
  document.getElementById("mood").textContent=state.mood;
  document.getElementById("rep").textContent=state.rep;
  document.getElementById("xp").textContent=state.xp;
  document.getElementById("level").textContent=state.level;
  document.getElementById("str").textContent=state.str;
  document.getElementById("int").textContent=state.int;
  document.getElementById("cha").textContent=state.cha;
  document.getElementById("day").textContent=state.day;
  document.getElementById("month").textContent=state.month;
  document.getElementById("healthBar").style.width=state.health+"%";
  document.getElementById("satietyBar").style.width=state.satiety+"%";
  document.getElementById("moodBar").style.width=state.mood+"%";
  document.getElementById("xpBar").style.width=Math.min(100,(state.xp/(state.level*50))*100)+"%";

  const invDiv=document.getElementById("inventory"); 
  invDiv.innerHTML="<h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>";
  state.inventory.forEach(item=>{ 
    const d=document.createElement("div"); 
    d.innerHTML=`<img src='https://img.icons8.com/ios-filled/24/ffffff/box.png'/>${item}`; 
    invDiv.appendChild(d); 
  });

  if(state.health<=0||state.satiety<=0||state.mood<=0){
    showStory("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! –í–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ.");
    document.getElementById("restart").style.display="block";
    document.getElementById("actions").innerHTML="";
    document.getElementById("shopItems").innerHTML="";
  }

  saveGame(); // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
}

// ---------- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (showStory, addAchievement, addAction, loseStats, goTo, shop, etc.) ----------
// –ü–æ–ª–Ω—ã–π –∫–æ–¥ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏, –Ω–æ —Å –≤—ã–∑–æ–≤–æ–º saveGame() –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
// –∏ —Å–Ω–∏–∂–µ–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞ 2 –∑–∞ –¥–µ–π—Å—Ç–≤–∏–µ

startGame();
</script>
</div>
</body>
</html>








































































































