<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>HARDCORE TYCOON: CAPITALISM</title>
    <style>
        :root {
            --bg: #020617; --panel: #0f172a; --accent: #eab308; 
            --green: #22c55e; --red: #ef4444; --blue: #3b82f6; --text: #f1f5f9;
        }
        body {
            margin: 0; background: var(--bg); font-family: 'Segoe UI', Roboto, sans-serif;
            color: var(--text); user-select: none; overflow-x: hidden;
        }
        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .topbar {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
            padding: 15px; background: #000; position: sticky; top: 0; z-index: 100;
            border-bottom: 3px solid var(--accent);
        }
        .stat-box { text-align: center; }
        .stat-val { color: var(--accent); font-weight: bold; display: block; font-size: 1.1em; }
        .tax-alert { font-size: 0.7em; color: var(--red); font-weight: bold; }

        /* –í–∫–ª–∞–¥–∫–∏ */
        .tabs { display: flex; background: var(--panel); border-bottom: 1px solid #1e293b; }
        .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; opacity: 0.5; transition: 0.3s; }
        .tab.active { opacity: 1; border-bottom: 3px solid var(--accent); background: #1e293b; }

        .panel { padding: 15px; display: none; max-width: 500px; margin: auto; }
        .panel.active { display: block; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card { 
            background: var(--panel); padding: 15px; margin: 10px 0; border-radius: 12px;
            border: 1px solid #1e293b; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        .biz-name { font-weight: bold; font-size: 1.1em; color: var(--accent); }
        .biz-stats { font-size: 0.85em; color: #94a3b8; margin: 5px 0; }

        button { 
            padding: 12px; border: none; border-radius: 6px; cursor: pointer; 
            font-weight: bold; transition: 0.2s; color: white; width: 100%;
        }
        button:active { transform: scale(0.97); }
        button:disabled { background: #334155 !important; opacity: 0.5; cursor: not-allowed; }

        .btn-buy { background: var(--green); margin-top: 10px; }
        .btn-mgr { background: #6366f1; margin-top: 5px; font-size: 0.8em; }
        
        #clickBtn { 
            height: 90px; font-size: 24px; margin-bottom: 20px;
            background: linear-gradient(to bottom, #facc15, #a16207);
            border-bottom: 4px solid #713f12; text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .buy-modes { display: flex; gap: 5px; margin-bottom: 15px; }
        .mode-btn { background: #1e293b; flex: 1; padding: 8px; }
        .mode-btn.active { background: var(--accent); color: black; }

        #event-toast {
            position: fixed; top: 80px; left: 50%; transform: translateX(-50%);
            padding: 10px 20px; border-radius: 8px; font-weight: bold;
            z-index: 1000; display: none; text-align: center; width: 80%;
        }

        .floating { 
            position: absolute; font-weight: bold; pointer-events: none; 
            animation: floatUp 0.8s ease-out forwards; z-index: 1000;
        }
        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-60px); }
        }
    </style>
</head>
<body>

<div class="topbar">
    <div class="stat-box">üí∞ –î–µ–Ω—å–≥–∏<span id="money" class="stat-val">0</span><span id="taxDisp" class="tax-alert"></span></div>
    <div class="stat-box">üìä –ß–∏—Å—Ç—ã–π $/—Å<span id="income" class="stat-val">0</span></div>
    <div class="stat-box">üèÖ –ü—Ä–µ—Å—Ç–∏–∂<span id="prestige" class="stat-val">0</span></div>
</div>

<div class="tabs">
    <div class="tab active" onclick="openTab(0)">‚öíÔ∏è –¢—Ä—É–¥</div>
    <div class="tab" onclick="openTab(1)">üèôÔ∏è –ê–∫—Ç–∏–≤—ã</div>
    <div class="tab" onclick="openTab(2)">‚öñÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
</div>

<div class="panel active" id="tab0">
    <button id="clickBtn">–†–ê–ë–û–¢–ê–¢–¨ üí∏</button>
    <div class="card">
        <div class="biz-name">–†—É—á–Ω–æ–π —Ç—Ä—É–¥</div>
        <div class="biz-stats">–°–∏–ª–∞ –∫–ª–∏–∫–∞: <span id="clickPwrDisp">1</span></div>
        <button class="btn-buy" id="upgradeClickBtn">–£–ª—É—á—à–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ($50)</button>
    </div>
</div>

<div class="panel" id="tab1">
    <div class="buy-modes">
        <button class="mode-btn active" onclick="setBuyMode(1, this)">x1</button>
        <button class="mode-btn" onclick="setBuyMode(10, this)">x10</button>
        <button class="mode-btn" onclick="setBuyMode(50, this)">x50</button>
    </div>
    <div id="businessList"></div>
</div>

<div class="panel" id="tab2">
    <div class="card">
        <h3>–≠–∫–æ–Ω–æ–º–∏–∫–∞</h3>
        <p>–í–∞—à –Ω–∞–ª–æ–≥: <span id="currentTax">0</span>%</p>
        <p style="font-size: 0.8em; color:#64748b">–ù–∞–ª–æ–≥–∏ —Ä–∞—Å—Ç—É—Ç –≤–º–µ—Å—Ç–µ —Å –≤–∞—à–∏–º –∫–∞–ø–∏—Ç–∞–ª–æ–º. –¢—Ä–∞—Ç—å—Ç–µ –¥–µ–Ω—å–≥–∏ –≤ –∞–∫—Ç–∏–≤—ã, —á—Ç–æ–±—ã –Ω–µ –∫–æ—Ä–º–∏—Ç—å –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–æ!</p>
    </div>
    <button class="btn-buy" onclick="prestigeReset()" style="background:var(--accent); color:black;">–†–ï–ò–ù–ö–ê–†–ù–ê–¶–ò–Ø (–ü—Ä–µ—Å—Ç–∏–∂)</button>
    <button onclick="hardReset()" style="margin-top:50px; background:transparent; color:var(--red); border:1px solid var(--red); font-size: 0.7em;">–£–î–ê–õ–ò–¢–¨ –°–û–•–†–ê–ù–ï–ù–ò–Ø</button>
</div>

<div id="event-toast"></div>

<script>
let g = {
    money: 50, clickPower: 1, prestige: 0, buyMode: 1, eventMult: 1,
    biz: [
        { id: 0, name: "–õ–∞—Ä—ë–∫ —Å —à–∞—É—Ä–º–æ–π", cost: 20, inc: 0.5, owned: 0, manager: false },
        { id: 1, name: "–ö–æ—Ñ–µ–π–Ω—è", cost: 300, inc: 3, owned: 0, manager: false },
        { id: 2, name: "–ë–∞—Ä–±–µ—Ä—à–æ–ø", cost: 2500, inc: 12, owned: 0, manager: false },
        { id: 3, name: "–ù–æ—á–Ω–æ–π –∫–ª—É–±", cost: 18000, inc: 60, owned: 0, manager: false },
        { id: 4, name: "–¢–æ—Ä–≥–æ–≤—ã–π —Ü–µ–Ω—Ç—Ä", cost: 120000, inc: 350, owned: 0, manager: false },
        { id: 5, name: "–§–∏—Ç–Ω–µ—Å-–∏–º–ø–µ—Ä–∏—è", cost: 600000, inc: 1200, owned: 0, manager: false },
        { id: 6, name: "–ù–µ—Ñ—Ç—è–Ω–∞—è –≤—ã—à–∫–∞", cost: 6000000, inc: 7000, owned: 0, manager: false },
        { id: 7, name: "–ê–≤–∏–∞–ª–∏–Ω–∏–∏", cost: 70000000, inc: 35000, owned: 0, manager: false },
        { id: 8, name: "–ê—Ç–æ–º–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è", cost: 500000000, inc: 180000, owned: 0, manager: false },
        { id: 9, name: "IT –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è", cost: 3000000000, inc: 800000, owned: 0, manager: false },
        { id: 10, name: "–ö–æ—Å–º–æ–¥—Ä–æ–º", cost: 60000000000, inc: 9000000, owned: 0, manager: false },
        { id: 11, name: "–ú–∞—Ä—Å-–°–∏—Ç–∏", cost: 800000000000, inc: 70000000, owned: 0, manager: false }
    ]
};

function f(n) {
    if (n < 1000) return Math.floor(n);
    let s = ['k', 'M', 'B', 'T', 'Q'];
    let e = Math.floor(Math.log10(n) / 3);
    return (n / Math.pow(1000, e)).toFixed(2) + s[e - 1];
}

function getTaxRate() {
    if (g.money > 1e9) return 0.35;
    if (g.money > 1e6) return 0.20;
    if (g.money > 1e5) return 0.10;
    return 0;
}

function getTotalIncome() {
    let raw = 0;
    g.biz.forEach(b => {
        let bInc = b.owned * b.inc * (1 + g.prestige) * g.eventMult;
        if(b.manager) bInc *= 1.7; // –ú–µ–Ω–µ–¥–∂–µ—Ä —á—É—Ç—å —Å–ª–∞–±–µ–µ
        bInc *= Math.pow(2, Math.floor(b.owned / 50)); // –ú–∏–ª–µ—Å—Ç–æ—É–Ω –∫–∞–∂–¥—ã–µ 50
        raw += bInc;
    });
    return raw * (1 - getTaxRate());
}

function updateUI() {
    document.getElementById('money').innerText = f(g.money);
    document.getElementById('income').innerText = f(getTotalIncome());
    document.getElementById('prestige').innerText = f(g.prestige);
    document.getElementById('clickPwrDisp').innerText = f(g.clickPower * (1 + g.prestige));
    document.getElementById('currentTax').innerText = (getTaxRate() * 100).toFixed(0);
    document.getElementById('taxDisp').innerText = getTaxRate() > 0 ? ` (–ù–∞–ª–æ–≥ ${ (getTaxRate()*100).toFixed(0) }%)` : "";
    document.getElementById('upgradeClickBtn').innerText = `–£–ª—É—á—à–∏—Ç—å –∫–ª–∏–∫ ($${f(50 * Math.pow(2.4, g.clickPower-1))})`;
}

document.getElementById('clickBtn').onclick = (e) => {
    let pwr = g.clickPower * (1 + g.prestige) * g.eventMult;
    g.money += pwr;
    showFloating(e, `+$${f(pwr)}`);
    updateUI();
};

function setBuyMode(m, btn) {
    g.buyMode = m;
    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderBusinesses();
}

function buyBiz(id) {
    let b = g.biz[id];
    let count = g.buyMode;
    let totalCost = 0;
    for(let i=0; i<count; i++) totalCost += b.cost * Math.pow(1.25, i);

    if (g.money >= totalCost) {
        g.money -= totalCost;
        b.owned += count;
        b.cost *= Math.pow(1.25, count);
        renderBusinesses();
        updateUI();
    }
}

function hireManager(id) {
    let b = g.biz[id];
    let price = b.cost * 20; 
    if (g.money >= price && !b.manager) {
        g.money -= price;
        b.manager = true;
        renderBusinesses();
    }
}

function renderBusinesses() {
    let html = '';
    g.biz.forEach(b => {
        let price = 0;
        for(let i=0; i<g.buyMode; i++) price += b.cost * Math.pow(1.25, i);
        
        html += `
            <div class="card">
                <div class="biz-name">${b.name} <small>[lvl ${b.owned}]</small></div>
                <div class="biz-stats">–ë–∞–∑–∞: $${f(b.inc)}/—Å | –î–æ—Ö–æ–¥: $${f(b.owned * b.inc * (1+g.prestige))}/—Å</div>
                <button class="btn-buy" onclick="buyBiz(${b.id})" ${g.money < price ? 'disabled' : ''}>
                    –ö—É–ø–∏—Ç—å x${g.buyMode} ($${f(price)})
                </button>
                <button class="btn-mgr" onclick="hireManager(${b.id})" ${b.manager || g.money < b.cost*20 ? 'disabled' : ''}>
                    ${b.manager ? '‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ' : 'üëî –ù–∞–Ω—è—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ($' + f(b.cost*20) + ')'}
                </button>
            </div>
        `;
    });
    document.getElementById('businessList').innerHTML = html;
}

function randomEvent() {
    if (Math.random() > 0.25) return;
    let events = [
        { t: "–ò–ù–§–õ–Ø–¶–ò–Ø", d: "–î–æ—Ö–æ–¥—ã —É–ø–∞–ª–∏ –Ω–∞ 40%!", m: 0.6, c: "#ef4444" },
        { t: "–ë–£–ú –ü–†–û–î–ê–ñ", d: "–î–æ—Ö–æ–¥—ã x2 –Ω–∞ 15 —Å–µ–∫—É–Ω–¥!", m: 2, c: "#22c55e" },
        { t: "–ö–†–ò–ü–¢–û-–•–ê–ô–ü", d: "–ö–ª–∏–∫–∏ x5 –Ω–∞ 10 —Å–µ–∫—É–Ω–¥!", m: 5, c: "#3b82f6" }
    ];
    let ev = events[Math.floor(Math.random()*events.length)];
    g.eventMult = ev.m;
    let toast = document.getElementById('event-toast');
    toast.style.display = 'block'; toast.style.background = ev.c;
    toast.innerText = ev.t + ": " + ev.d;
    setTimeout(() => { g.eventMult = 1; toast.style.display = 'none'; updateUI(); }, 15000);
}

document.getElementById('upgradeClickBtn').onclick = function() {
    let cost = 50 * Math.pow(2.4, g.clickPower-1);
    if(g.money >= cost) {
        g.money -= cost;
        g.clickPower++;
        updateUI();
    }
};

function openTab(i) {
    document.querySelectorAll('.tab, .panel').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.tab')[i].classList.add('active');
    document.querySelectorAll('.panel')[i].classList.add('active');
    if(i === 1) renderBusinesses();
}

function prestigeReset() {
    if(g.money < 1e6) return alert("–ù—É–∂–Ω–æ —Ö–æ—Ç—è –±—ã $1,000,000 —á–∏—Å—Ç–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞!");
    if(confirm("–í—ã –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –≤—Å–µ –¥–µ–Ω—å–≥–∏ –∏ –±–∏–∑–Ω–µ—Å—ã, –Ω–æ –ø–æ–ª—É—á–∏—Ç–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –±–æ–Ω—É—Å –∫ –¥–æ—Ö–æ–¥—É. –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ?")) {
        g.prestige += Math.floor(Math.sqrt(g.money / 1e5));
        g.money = 100; g.clickPower = 1;
        g.biz.forEach(b => { b.owned = 0; b.manager = false; b.cost = b.cost / 2; }); 
        save(); location.reload();
    }
}

function showFloating(e, text) {
    let div = document.createElement('div');
    div.className = 'floating';
    div.innerText = text;
    div.style.left = e.pageX + 'px'; div.style.top = e.pageY + 'px';
    document.body.appendChild(div);
    setTimeout(() => div.remove(), 800);
}

function save() { localStorage.setItem('hardcore_tycoon_save', JSON.stringify(g)); }
function load() { 
    let s = localStorage.getItem('hardcore_tycoon_save');
    if(s) { let d = JSON.parse(s); Object.assign(g, d); }
}
function hardReset() { if(confirm("–°–±—Ä–æ—Å–∏—Ç—å –í–û–û–ë–©–ï –≤—Å—ë?")) { localStorage.clear(); location.reload(); } }

setInterval(() => { g.money += getTotalIncome() / 10; updateUI(); }, 100);
setInterval(randomEvent, 60000); 
setInterval(save, 15000);

window.onload = () => { load(); renderBusinesses(); updateUI(); };
</script>
</body>
</html>
