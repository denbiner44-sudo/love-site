<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ë–æ–º–∂–∞—Ä–∞ ‚Äî –ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—Ö–∞!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {margin:0;font-family:Arial,sans-serif;background:linear-gradient(135deg,#0f172a,#020617);color:#e5e7eb;display:flex;justify-content:center;padding:10px;}
.container {width:100%;max-width:600px;background:#111827;padding:15px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,0.6);}
h1,h3,h4{margin:5px 0;}
.stats div,#inventory div,#achievements div{background:#1f2937;padding:8px;border-radius:10px;margin:4px 0;display:flex;align-items:center;}
.stats span.progress{display:inline-block;height:8px;border-radius:4px;background:#16a34a;margin-left:6px;flex-grow:1;transition: width 0.3s ease;}
button{padding:10px;margin:4px;border:none;border-radius:8px;background:#22c55e;color:#052e16;cursor:pointer;display:flex;align-items:center;width:100%;justify-content:center;}
button:hover{background:#16a34a;}
button img{width:24px;height:24px;margin-right:6px;}
.map button{background:#3b82f6;color:white;}
#story{min-height:80px;margin-bottom:10px;background:#1f2937;padding:10px;border-radius:12px;font-size:16px;line-height:1.4;}
.animated{animation:flash 0.4s ease;}
@keyframes flash{0%{background-color:#facc15;}50%{background-color:#1f2937;}100%{background-color:#facc15;}}
.inventory img{width:24px;height:24px;margin-right:6px;}
.actions,#shopItems{display:flex;flex-direction:column;max-height:300px;overflow-y:auto;margin-bottom:10px;}
</style>
</head>
<body>
<div class="container">
<h1>üßπ –ë–æ–º–∂–∞—Ä–∞ ‚Äî –ò—Å—Ç–æ—Ä–∏—è —É—Å–ø–µ—Ö–∞!</h1>

<div class="stats">
<h3>–ü–µ—Ä—Å–æ–Ω–∞–∂</h3>
<div>üí∞ –î–µ–Ω—å–≥–∏: <span id="money">0</span> –≥—Ä–Ω | $: <span id="usd">0</span> | –ö—É—Ä—Å: <span id="rate">42.50</span> –≥—Ä–Ω/$</div>
<div>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <span id="health">100</span> <span class="progress" id="healthBar"></span></div>
<div>üçó –°—ã—Ç–æ—Å—Ç—å: <span id="satiety">100</span> <span class="progress" id="satietyBar"></span></div>
<div>üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: <span id="mood">100</span> <span class="progress" id="moodBar"></span></div>
<div>‚≠ê –†–µ–ø—É—Ç–∞—Ü–∏—è: <span id="rep">0</span></div>
<div>‚ö° –û–ø—ã—Ç: <span id="xp">0</span> | –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span> <span class="progress" id="xpBar"></span></div>
<div>üí™ –°–∏–ª–∞: <span id="str">5</span> | üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <span id="int">5</span> | ü§ù –•–∞—Ä–∏–∑–º–∞: <span id="cha">5</span></div>
<div>üïí –î–µ–Ω—å: <span id="day">1</span> | –ú–µ—Å—è—Ü: <span id="month">1</span></div>
</div>

<div id="story"></div>

<div class="map">
<h3>üèòÔ∏è –ö–∞—Ä—Ç–∞ –≥–æ—Ä–æ–¥–∞</h3>
<button onclick="goTo('street')">–£–ª–∏—Ü–∞</button>
<button onclick="goTo('shop')">–ú–∞–≥–∞–∑–∏–Ω</button>
<button onclick="goTo('home')">–î–æ–º</button>
<button onclick="goTo('hospital')">–ë–æ–ª—å–Ω–∏—Ü–∞</button>
<button onclick="goTo('prison')">–¢—é—Ä—å–º–∞</button>
<button onclick="goTo('park')">–ü–∞—Ä–∫</button>
<button onclick="goTo('work')">–†–∞–±–æ—Ç–∞</button>
</div>

<div class="actions" id="actions"></div>
<div class="actions" id="shopItems"></div>
<div class="inventory" id="inventory"><h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3></div>
<div id="achievements"><h3>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3></div>
<button id="restart" onclick="startGame()" style="display:none;">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
</div>

<script>
// ---------- State ----------
let state;
const achievements = new Set();
let rate = 42.50; // –≥—Ä–Ω/$

// ---------- Items ----------
const properties = { "–ü–∞–ª–∞—Ç–∫–∞":{price:500}, "–ß–µ—Ä–¥–∞–∫":{price:200}, "–ö–≤–∞—Ä—Ç–∏—Ä–∞":{price:1000}, "–î–æ–º":{price:40000}, "–ü–µ–Ω—Ç—Ö–∞—É—Å":{price:200000} };
const transport = { "–ö—Ä–æ—Å—Å–æ–≤–∫–∏":0, "–í–µ–ª–æ—Å–∏–ø–µ–¥":500, "–°–∫—É—Ç–µ—Ä":2000, "–ú–∞—à–∏–Ω–∞":10000, "–°–ø–æ—Ä—Ç–∫–∞—Ä":50000, "–í–µ—Ä—Ç–æ–ª–µ—Ç":200000 };
const education = { 
"–ê–∑–±—É–∫–∞":1000, "–¢–∞–±–ª–∏—Ü–∞ —É–º–Ω–æ–∂–µ–Ω–∏—è":2000, "–ë—É–∫–≤–∞—Ä–∏–∫":5000, 
"–®–∫–æ–ª–∞ 1-5 –∫–ª–∞—Å":8000, "–®–∫–æ–ª–∞ 6-9 –∫–ª–∞—Å":10000, 
"–®–∫–æ–ª–∞ 10-12 –∫–ª–∞—Å":12000, "–ö–æ–ª–ª–µ–¥–∂":15000, "–£–Ω–∏–≤–µ—Ä":20000, 
"–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞":30000, "–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞":50000 
};

// ---------- Jobs ----------
const jobs = [
{name:"–î–≤–æ—Ä–Ω–∏–∫", salary:150, level:1, property:null, transport:null, education:"–ê–∑–±—É–∫–∞"},
{name:"–ü–æ—á—Ç–∞–ª—å–æ–Ω", salary:300, level:1, property:null, transport:null, education:"–ë—É–∫–≤–∞—Ä–∏–∫"},
{name:"–¢–∞–∫—Å–∏—Å—Ç", salary:500, level:2, property:null, transport:"–ú–∞—à–∏–Ω–∞", education:"–®–∫–æ–ª–∞ 1-5 –∫–ª–∞—Å"},
{name:"–°—Ç—Ä–æ–∏—Ç–µ–ª—å", salary:800, level:3, property:null, transport:null, education:"–®–∫–æ–ª–∞ 6-9 –∫–ª–∞—Å"},
{name:"–ò–Ω–∂–µ–Ω–µ—Ä", salary:1000, level:4, property:null, transport:null, education:"–®–∫–æ–ª–∞ 10-12 –∫–ª–∞—Å"},
{name:"–ú–µ–Ω–µ–¥–∂–µ—Ä", salary:1500, level:5, property:"–ö–≤–∞—Ä—Ç–∏—Ä–∞", transport:null, education:"–ö–æ–ª–ª–µ–¥–∂"},
{name:"–ë–∞–Ω–∫–∏—Ä", salary:2000, level:5, property:"–ö–≤–∞—Ä—Ç–∏—Ä–∞", transport:null, education:"–£–Ω–∏–≤–µ—Ä"},
{name:"–ü—Ä–æ–¥–∞–≤–µ—Ü", salary:2200, level:5, property:null, transport:null, education:"–ö–æ–ª–ª–µ–¥–∂"},
{name:"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç", salary:2500, level:6, property:null, transport:"–ú–∞—à–∏–Ω–∞", education:"–£–Ω–∏–≤–µ—Ä"},
{name:"–î–∏–∑–∞–π–Ω–µ—Ä", salary:2700, level:6, property:null, transport:null, education:"–£–Ω–∏–≤–µ—Ä"},
{name:"–ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥", salary:3000, level:6, property:"–ö–≤–∞—Ä—Ç–∏—Ä–∞", transport:null, education:"–£–Ω–∏–≤–µ—Ä"},
{name:"–ë–ª–æ–≥–µ—Ä", salary:3200, level:6, property:null, transport:null, education:"–ö–æ–ª–ª–µ–¥–∂"},
{name:"–Æ—Ä–∏—Å—Ç", salary:3500, level:7, property:"–î–æ–º", transport:null, education:"–£–Ω–∏–≤–µ—Ä"},
{name:"–í—Ä–∞—á", salary:3700, level:7, property:"–î–æ–º", transport:null, education:"–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞"},
{name:"–ü–∏–ª–æ—Ç", salary:4000, level:7, property:"–î–æ–º", transport:"–°–ø–æ—Ä—Ç–∫–∞—Ä", education:"–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞"},
{name:"–î–µ–ø—É—Ç–∞—Ç", salary:5000, level:8, property:"–î–æ–º", transport:"–ú–∞—à–∏–Ω–∞", education:"–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞"},
{name:"–ú–∏–Ω–∏—Å—Ç—Ä", salary:7000, level:9, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–°–ø–æ—Ä—Ç–∫–∞—Ä", education:"–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞"},
{name:"–ë–∞–Ω–∫–∏—Ä 2", salary:7500, level:9, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–ú–∞—à–∏–Ω–∞", education:"–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞"},
{name:"–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç", salary:10000, level:10, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–í–µ—Ä—Ç–æ–ª–µ—Ç", education:"–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞"},
{name:"–ö–æ—Å–º–æ–Ω–∞–≤—Ç", salary:12000, level:10, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–í–µ—Ä—Ç–æ–ª–µ—Ç", education:"–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞"},
{name:"–ú–∞–≥–Ω–∞—Ç", salary:15000, level:11, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–í–µ—Ä—Ç–æ–ª–µ—Ç", education:"–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞"},
{name:"–ì–µ–Ω–µ—Ä–∞–ª", salary:18000, level:12, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–í–µ—Ä—Ç–æ–ª–µ—Ç", education:"–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞"},
{name:"–°–µ–Ω–∞—Ç–æ—Ä", salary:20000, level:12, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–í–µ—Ä—Ç–æ–ª–µ—Ç", education:"–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞"}
];

// ---------- Start ----------
function startGame(){
  state = { money:50, usd:0, health:100, satiety:100, mood:100, rep:0, xp:0, level:1, str:5, int:5, cha:5, day:1, month:1, inventory:[] };
  achievements.clear(); renderAchievements(); updateUI();
  showStory("–í—ã –±–æ–º–∂, –Ω–æ –≥–æ—Ç–æ–≤—ã –∫ –∂–∏–∑–Ω–∏ –≤ –≥–æ—Ä–æ–¥–µ. –í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é.");
  document.getElementById("restart").style.display="none";
  randomRate();
}

// ---------- UI ----------
function updateUI(){
  document.getElementById("money").textContent = state.money;
  document.getElementById("usd").textContent = state.usd.toFixed(2);
  document.getElementById("rate").textContent = rate.toFixed(2);

  document.getElementById("health").textContent = state.health;
  document.getElementById("satiety").textContent = state.satiety;
  document.getElementById("mood").textContent = state.mood;

  document.getElementById("rep").textContent=state.rep;
  document.getElementById("xp").textContent=state.xp;
  document.getElementById("level").textContent=state.level;
  document.getElementById("str").textContent=state.str;
  document.getElementById("int").textContent=state.int;
  document.getElementById("cha").textContent=state.cha;
  document.getElementById("day").textContent=state.day;
  document.getElementById("month").textContent=state.month;

  document.getElementById("healthBar").style.width = state.health+"%";
  document.getElementById("satietyBar").style.width = state.satiety+"%";
  document.getElementById("moodBar").style.width = state.mood+"%";
  document.getElementById("xpBar").style.width = Math.min(100, (state.xp/(state.level*50))*100) + "%";

  const invDiv=document.getElementById("inventory");
  invDiv.innerHTML="<h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>";
  state.inventory.forEach(item=>{
    const d=document.createElement("div");
    d.textContent=item;
    invDiv.appendChild(d);
  });

  if(state.health <=0 || state.satiety <=0 || state.mood <=0){
    showStory("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! –í–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ.");
    document.getElementById("restart").style.display="block";
    document.getElementById("actions").innerHTML="";
    document.getElementById("shopItems").innerHTML="";
  }
}

// ---------- Story ----------
function showStory(text){
  const story=document.getElementById("story");
  story.textContent=text;
  story.classList.add("animated");
  setTimeout(()=>story.classList.remove("animated"),400);
}

// ---------- Achievements ----------
function addAchievement(name){
  if(achievements.has(name)) return;
  achievements.add(name); renderAchievements();
}

function renderAchievements(){
  const div=document.getElementById("achievements");
  div.innerHTML="<h3>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>";
  achievements.forEach(a=>{ const d=document.createElement("div"); d.textContent=a; div.appendChild(d); });
}

// ---------- Actions ----------
function addAction(text, fn){
  const btn=document.createElement("button");
  btn.innerHTML=text;
  btn.onclick=()=>{
    fn();
    findBottles(); // –†–∞–Ω–¥–æ–º–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –¥–æ 5 –±—É—Ç—ã–ª–æ–∫ –Ω–∞ –ª—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
    loseStats();   // –ü–æ—Ç–µ—Ä—è –∑–¥–æ—Ä–æ–≤—å—è –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
  };
  document.getElementById("actions").appendChild(btn);
}

// ---------- Shop ----------
function showShopItems(){
  const shopDiv = document.getElementById("shopItems");
  shopDiv.innerHTML = "<h3>üõí –ò–º—É—â–µ—Å—Ç–≤–æ</h3>";

  const propHeader = document.createElement("h4"); propHeader.textContent = "üè† –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å"; shopDiv.appendChild(propHeader);
  Object.keys(properties).forEach(p=>{
    const btn = document.createElement("button"); btn.textContent = `${p} (${properties[p].price} –≥—Ä–Ω)`; btn.onclick = ()=>buyPermanentItem(p); shopDiv.appendChild(btn);
  });

  const movHeader = document.createElement("h4"); movHeader.textContent = "üöó –î–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ"; shopDiv.appendChild(movHeader);
  Object.keys(transport).forEach(t=>{
    const btn = document.createElement("button"); btn.textContent = `${t} (${transport[t]} –≥—Ä–Ω)`; btn.onclick = ()=>buyPermanentItem(t); shopDiv.appendChild(btn);
  });

  const eduHeader = document.createElement("h4"); eduHeader.textContent = "üìö –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ"; shopDiv.appendChild(eduHeader);
  Object.keys(education).forEach(e=>{
    const btn = document.createElement("button"); btn.textContent = `${e} (${education[e]} –≥—Ä–Ω)`; btn.onclick = ()=>buyPermanentItem(e); shopDiv.appendChild(btn);
  });

  // –ö–Ω–æ–ø–∫–∞ –æ–±–º–µ–Ω–∞ –≤–∞–ª—é—Ç
  const exchangeBtn = document.createElement("button");
  exchangeBtn.textContent = "üí± –û–±–º–µ–Ω –≤–∞–ª—é—Ç—ã (–≥—Ä–Ω ‚Üî $)";
  exchangeBtn.onclick = exchangeCurrency;
  shopDiv.appendChild(exchangeBtn);
}

// ---------- Locations ----------
function goTo(loc){
  state.day++; if(state.day>30){ state.day=1; state.month++; }
  document.getElementById("actions").innerHTML="";
  document.getElementById("shopItems").innerHTML="";

  switch(loc){
    case "street":
      showStory("–í—ã –Ω–∞ —É–ª–∏—Ü–µ. –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å —Ä–∞–±–æ—Ç—É –∏–ª–∏ —Å–æ–±—ã—Ç–∏–µ.");
      addAction("üë∑ –ò—Å–∫–∞—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ä–∞–±–æ—Ç—É (+50$)", ()=>{ gainMoney(50); gainXP(10); addAchievement("–ü–µ—Ä–≤—ã–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫"); });
      addAction("üé≤ –°–ª—É—á–∞–π–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ —É–ª–∏—Ü–µ", streetEvent);
      break;
    case "shop":
      showStory("–í—ã –≤ –º–∞–≥–∞–∑–∏–Ω–µ. –ú–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –µ–¥—É, –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –∏–ª–∏ –∏–º—É—â–µ—Å—Ç–≤–æ.");
      addAction("üçé –ö—É–ø–∏—Ç—å –µ–¥—É (20$ +10 —Å—ã—Ç–æ—Å—Ç–∏)", ()=>buyItem("–ï–¥–∞",20,10,"satiety"));
      addAction("üíä –ö—É–ø–∏—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–æ (50$ +30 –∑–¥–æ—Ä–æ–≤—å—è)", ()=>buyItem("–õ–µ–∫–∞—Ä—Å—Ç–≤–æ",50,30,"health"));
      addAction("üíº –ö—É–ø–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (100$ +1 —Å–∏–ª–∞)", ()=>buyItem("–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç",100,0,"str"));
      showShopItems();
      break;
    case "home":
      showStory("–í—ã –¥–æ–º–∞. –ú–æ–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –∏–ª–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è.");
      addAction("üõå –û—Ç–¥–æ—Ö–Ω—É—Ç—å (+20 –∑–¥–æ—Ä–æ–≤—å—è, +15 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è)", ()=>{ rest(); changeMood(15); });
      addAction("üèãÔ∏è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è (+1 —Å–∏–ª–∞, +5 –æ–ø—ã—Ç–∞)", ()=>train("str"));
      addAction("üìö –£—á–∏—Ç—å –Ω–∞–≤—ã–∫–∏ (+1 –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, +5 –æ–ø—ã—Ç–∞)", ()=>train("int"));
      addAction("üí¨ –û–±—â–µ–Ω–∏–µ (+1 —Ö–∞—Ä–∏–∑–º–∞, +5 –æ–ø—ã—Ç–∞, +5 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è)", ()=>{ train("cha"); changeMood(5); });
      break;
    case "park":
      showStory("–í—ã –≤ –ø–∞—Ä–∫–µ. –ú–æ–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞–π—Ç–∏ —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ.");
      addAction("üçø –ü–æ–π—Ç–∏ –≤ –∫–∏–Ω–æ (+15 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è)", ()=>changeMood(15));
      addAction("ü•§ –í–∑—è—Ç—å –∞–ª–∫–æ–≥–æ–ª—å (+20 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, -5 –∑–¥–æ—Ä–æ–≤—å—è)", ()=>{ changeMood(20); changeHealth(-5); });
      break;
    case "work":
      showStory("–†–∞–±–æ—Ç–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç –¥–µ–Ω—å–≥–∏ –∏ –æ–ø—ã—Ç. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–±–æ—Ç—É:");
      jobs.forEach(job=>{
        addAction(`${job.name} (+${job.salary} –≥—Ä–Ω)`, ()=>{
          if(state.level<job.level){ showStory("–£—Ä–æ–≤–µ–Ω—å —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π"); return; }
          if(job.property && !state.inventory.includes(job.property)){ showStory(`–ù—É–∂–µ–Ω ${job.property}`); return; }
          if(job.transport && !state.inventory.includes(job.transport)){ showStory(`–ù—É–∂–µ–Ω ${job.transport}`); return; }
          if(job.education && !state.inventory.includes(job.education)){ showStory(`–ù—É–∂–µ–Ω ${job.education}`); return; }
          gainMoney(job.salary); gainXP(Math.floor(job.salary/10));
          showStory(`–í—ã –ø–æ—Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ ${job.name} –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${job.salary} –≥—Ä–Ω`);
          addAchievement(`–†–∞–±–æ—Ç–∞: ${job.name}`);
        });
      });
      break;
    default: showStory("–õ–æ–∫–∞—Ü–∏—è –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞"); break;
  }
  updateUI();
}

// ---------- Game Logic ----------
function gainMoney(amount){ state.money+=amount; updateUI(); }
function gainXP(amount){ 
  state.xp+=amount; 
  while(state.xp >= state.level*50){ state.xp -= state.level*50; state.level++; addAchievement("–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å"); }
  updateUI(); 
}
function buyItem(name,cost,heal="",skill=""){ 
  if(state.money<cost){ showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥"); return; } 
  state.money-=cost; 
  if(!state.inventory.includes(name)) state.inventory.push(name); 
  if(heal) state[skill] = Math.min(100,state[skill]+heal); 
  if(skill && !heal) state[skill]+=1; 
  updateUI(); 
}
function rest(){ state.health=Math.min(100,state.health+20); state.satiety=Math.min(100,state.satiety+10); updateUI(); }
function train(skill){ state[skill]+=1; gainXP(5); updateUI(); }
function buyPermanentItem(itemName){
  let price = properties[itemName]?.price || transport[itemName] || education[itemName] || 0;
  if(state.money<price){ showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥"); return; }
  state.money -= price; if(!state.inventory.includes(itemName)) state.inventory.push(itemName); showStory(`–í—ã –∫—É–ø–∏–ª–∏ ${itemName} –Ω–∞ –≤—Å–µ–≥–¥–∞`); updateUI();
}

// ---------- Currency Exchange ----------
function exchangeCurrency(){
  const usdAmount = prompt("–°–∫–æ–ª—å–∫–æ $ –∫—É–ø–∏—Ç—å/–ø—Ä–æ–¥–∞—Ç—å? (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ ‚Äî –∫—É–ø–∏—Ç—å $ –∑–∞ –≥—Ä–Ω, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ ‚Äî –ø—Ä–æ–¥–∞—Ç—å $)");
  const val = parseFloat(usdAmount);
  if(isNaN(val)) return;
  if(val>0){
    const cost = val*rate;
    if(state.money<cost){ showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≥—Ä–Ω"); return; }
    state.money -= cost; state.usd += val;
    showStory(`–í—ã –∫—É–ø–∏–ª–∏ ${val.toFixed(2)}$ –∑–∞ ${cost.toFixed(2)} –≥—Ä–Ω`);
  } else {
    const sell = -val;
    if(state.usd<sell){ showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ $"); return; }
    state.usd -= sell; state.money += sell*rate;
    showStory(`–í—ã –ø—Ä–æ–¥–∞–ª–∏ ${sell.toFixed(2)}$ –∏ –ø–æ–ª—É—á–∏–ª–∏ ${(sell*rate).toFixed(2)} –≥—Ä–Ω`);
  }
  updateUI();
}

// ---------- Random Rate ----------
function randomRate(){
  setInterval(()=>{
    rate += (Math.random()-0.5)*2; // –∫–æ–ª–µ–±–∞–Ω–∏–µ ¬±1
    if(rate<30) rate=30; if(rate>60) rate=60;
    updateUI();
  },5000);
}

// ---------- Random Bottles ----------
function findBottles(){
  const num = Math.floor(Math.random()*6); // 0‚Äì5
  for(let i=0;i<num;i++){
    state.inventory.push("–ë—É—Ç—ã–ª–∫–∞");
  }
}

// ---------- Stats Loss ----------
function loseStats(){
  state.health = Math.max(0, state.health - Math.floor(Math.random()*3));
  state.satiety = Math.max(0, state.satiety - Math.floor(Math.random()*4));
  state.mood = Math.max(0, state.mood - Math.floor(Math.random()*3));
}

// ---------- Street Event ----------
function streetEvent(){
  const events = [
    ()=>{ gainMoney(100); showStory("–ù–∞–π–¥–µ–Ω–æ 100 –≥—Ä–Ω!"); },
    ()=>{ changeHealth(-10); showStory("–ü–æ–ø–∞–ª–∏ –ø–æ–¥ –¥–æ–∂–¥—å, –∑–¥–æ—Ä–æ–≤—å–µ -10"); },
    ()=>{ changeMood(15); showStory("–í—Å—Ç—Ä–µ—Ç–∏–ª–∏ –¥—Ä—É–∑–µ–π, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ +15"); },
    ()=>{ gainXP(10); showStory("–ü—Ä–æ—á–∏—Ç–∞–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ, –æ–ø—ã—Ç +10"); }
  ];
  const e = events[Math.floor(Math.random()*events.length)];
  e();
}

// ---------- Helpers ----------
function changeHealth(val){ state.health=Math.min(100,Math.max(0,state.health+val)); updateUI(); }
function changeMood(val){ state.mood=Math.min(100,Math.max(0,state.mood+val)); updateUI(); }

startGame();
</script>
</body>
</html>




























































































