<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
margin:0;min-height:100vh;font-family:Montserrat;
background:linear-gradient(120deg,#ff9a9e,#fad0c4,#fbc2eb);
background-size:400% 400%;animation:gradient 10s ease infinite;
display:flex;justify-content:center;align-items:center;
overflow:hidden;color:#fff
}
@keyframes gradient{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

.card{
width:95%;max-width:850px;padding:30px;border-radius:30px;
background:rgba(255,255,255,.25);backdrop-filter:blur(16px);
box-shadow:0 20px 40px rgba(0,0,0,.25);
text-align:center
}

.gallery{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
gap:15px
}
.photo{position:relative}
.photo img{
width:100%;height:180px;
object-fit:cover;border-radius:18px
}
.delete{
position:absolute;top:8px;right:8px;
width:28px;height:28px;border:none;border-radius:50%;
background:rgba(0,0,0,.6);color:#fff
}

.music-btn{
position:absolute;top:20px;right:20px;
width:45px;height:45px;border-radius:50%;
border:none;font-size:20px
}

.overlay{
position:fixed;inset:0;
background:rgba(0,0,0,.9);
display:flex;align-items:center;justify-content:center;
z-index:9999
}
.overlay img{
max-width:90%;max-height:90%;
border-radius:20px
}

.heart{
position:fixed;color:rgba(255,255,255,.6);
animation:float 8s linear infinite
}
@keyframes float{
0%{transform:translateY(100vh)}
100%{transform:translateY(-10vh)}
}
</style>
</head>

<body>

<div class="card">
<button class="music-btn" onclick="toggleMusic()">üéµ</button>

<h1>–ù–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è üíï</h1>
<b>–°–∞—à–∞ ‚ù§Ô∏è –ê–¥—É—à–∫–∞</b>
<div id="days" style="margin:10px 0"></div>

<input type="file" multiple accept="image/*" onchange="addPhotos(event)">
<div class="gallery" id="gallery"></div>
</div>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_7c6c8d6b5a.mp3">
</audio>

<script>
/* üìÖ –î–ù–ò –í–ú–ï–°–¢–ï ‚Äî –° 05.08.2024 */
const start = new Date(2024, 7, 5);
const daysEl = document.getElementById("days");
daysEl.innerText =
"–ú—ã –≤–º–µ—Å—Ç–µ —É–∂–µ " +
Math.floor((Date.now() - start) / 86400000) +
" –¥–Ω–µ–π üíñ";

/* üéµ –ú–£–ó–´–ö–ê */
const music = document.getElementById("music");
let playing = false;
function toggleMusic(){
playing ? music.pause() : music.play();
playing = !playing;
}

/* üì∏ –§–û–¢–û */
let photos = JSON.parse(localStorage.getItem("photos")) || [];
const gallery = document.getElementById("gallery");

function save(){
localStorage.setItem("photos", JSON.stringify(photos));
}
function render(){
gallery.innerHTML="";
photos.forEach((src,i)=>{
const d=document.createElement("div");
d.className="photo";
const img=document.createElement("img");
img.src=src;
img.onclick=()=>openImg(src);
const b=document.createElement("button");
b.className="delete";
b.innerHTML="‚úñ";
b.onclick=()=>{
photos.splice(i,1);
save();render();
};
d.append(img,b);
gallery.append(d);
});
}
function addPhotos(e){
for(let f of e.target.files){
const r=new FileReader(),img=new Image();
r.onload=x=>img.src=x.target.result;
img.onload=()=>{
const c=document.createElement("canvas"),m=800;
let w=img.width,h=img.height;
if(w>h&&w>m){h*=m/w;w=m}
else if(h>m){w*=m/h;h=m}
c.width=w;c.height=h;
c.getContext("2d").drawImage(img,0,0,w,h);
photos.push(c.toDataURL("image/jpeg",.7));
save();render();
};
r.readAsDataURL(f);
}
}
function openImg(src){
const o=document.createElement("div");
o.className="overlay";
o.onclick=()=>o.remove();
o.innerHTML=`<img src="${src}">`;
document.body.append(o);
}

/* ‚ù§Ô∏è –°–ï–†–î–¶–ê */
setInterval(()=>{
const h=document.createElement("div");
h.className="heart";
h.innerHTML="‚ù§";
h.style.left=Math.random()*100+"vw";
h.style.fontSize=12+Math.random()*20+"px";
document.body.append(h);
setTimeout(()=>h.remove(),8000);
},500);

render();
</script>

</body>
</html>


