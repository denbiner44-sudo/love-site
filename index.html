<!DOCTYPE html>

<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –°–∏–º—É–ª—è—Ç–æ—Ä</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
margin:0;
font-family:Arial;
background:#020617;
color:#e5e7eb;
display:flex;
justify-content:center;
padding:10px;
}

.container{
width:100%;
max-width:1100px;
background:#111827;
padding:12px;
border-radius:14px;
}

.panel{
background:#1f2937;
padding:8px;
border-radius:10px;
margin-bottom:6px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
gap:6px;
}

button{
padding:8px;
border:none;
border-radius:8px;
background:#22c55e;
font-weight:bold;
cursor:pointer;
}

canvas{
background:#020617;
border-radius:10px;
width:100%;
height:200px;
}

#log{
height:120px;
overflow:auto;
background:#020617;
padding:6px;
border-radius:10px;
margin-top:6px;
font-size:14px;
}
</style>

</head>

<body>
<div class="container">

<h2>üí∞ –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –°–∏–º—É–ª—è—Ç–æ—Ä</h2>

<div class="panel">
üíµ –ù–∞–ª–∏—á–Ω—ã–µ: <span id="cash"></span> |
üè¶ –ë–∞–Ω–∫: <span id="bank"></span> |
üìà –ê–∫—Ü–∏–∏: <span id="stocks"></span>
</div>

<canvas id="chart"></canvas>

<div class="grid">
<button onclick="work()">–†–∞–±–æ—Ç–∞</button>
<button onclick="business()">–ë–∏–∑–Ω–µ—Å</button>
<button onclick="deposit()">–í –±–∞–Ω–∫ 100</button>
<button onclick="withdraw()">–ò–∑ –±–∞–Ω–∫–∞ 100</button>
<button onclick="buyStock()">–ö—É–ø–∏—Ç—å –∞–∫—Ü–∏—é</button>
<button onclick="sellStock()">–ü—Ä–æ–¥–∞—Ç—å –∞–∫—Ü–∏—é</button>
<button onclick="nextDay()">–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å</button>
</div>

<div id="log"></div>

</div>

<script>
let g;

function newGame(){
g={
cash:500,
bank:0,
stocks:0,
business:0,
price:100,
history:[100],
day:1
};
log("–ù–æ–≤–∞—è –∏–≥—Ä–∞");
}

function log(t){
let el=document.getElementById("log");
el.innerHTML+="<div>–î–µ–Ω—å "+g.day+": "+t+"</div>";
el.scrollTop=el.scrollHeight;
}

function update(){
cash.textContent=Math.floor(g.cash);
bank.textContent=Math.floor(g.bank);
stocks.textContent=g.stocks;
drawChart();
save();
}

/* –ì–†–ê–§–ò–ö */

function drawChart(){
let c=document.getElementById("chart");
let ctx=c.getContext("2d");
ctx.clearRect(0,0,c.width,c.height);

let h=g.history;
let max=Math.max(...h);
let min=Math.min(...h);

ctx.beginPath();

for(let i=0;i<h.length;i++){
let x=i*(c.width/(h.length-1));
let y=c.height-((h[i]-min)/(max-min+1))*c.height;
if(i===0) ctx.moveTo(x,y);
else ctx.lineTo(x,y);
}

ctx.strokeStyle="#22c55e";
ctx.stroke();
}

/* –ó–ê–†–ê–ë–û–¢–û–ö */

function work(){
g.cash+=100;
log("–†–∞–±–æ—Ç–∞ +100");
update();
}

function business(){
if(g.cash>=300){
g.cash-=300;
g.business++;
log("–û—Ç–∫—Ä—ã—Ç –±–∏–∑–Ω–µ—Å");
update();
}
}

/* –ë–ê–ù–ö */

function deposit(){
if(g.cash>=100){
g.cash-=100;
g.bank+=100;
log("–í–∫–ª–∞–¥ –≤ –±–∞–Ω–∫");
update();
}
}

function withdraw(){
if(g.bank>=100){
g.bank-=100;
g.cash+=100;
log("–°–Ω—è—Ç–∏–µ –∏–∑ –±–∞–Ω–∫–∞");
update();
}
}

/* –ë–ò–†–ñ–ê */

function market(){
let change=Math.random()*20-10;
g.price=Math.max(5,g.price+change);
g.history.push(g.price);
if(g.history.length>50) g.history.shift();
}

function buyStock(){
if(g.cash>=g.price){
g.cash-=g.price;
g.stocks++;
log("–ö—É–ø–ª–µ–Ω–∞ –∞–∫—Ü–∏—è");
update();
}
}

function sellStock(){
if(g.stocks>0){
g.cash+=g.price;
g.stocks--;
log("–ü—Ä–æ–¥–∞–Ω–∞ –∞–∫—Ü–∏—è");
update();
}
}

/* –î–ï–ù–¨ */

function nextDay(){
g.day++;

market();

if(g.business>0){
let income=g.business*80;
g.cash+=income;
log("–î–æ—Ö–æ–¥ –±–∏–∑–Ω–µ—Å–∞ +"+income);
}

if(g.bank>0){
let interest=g.bank*0.02;
g.bank+=interest;
log("–ü—Ä–æ—Ü–µ–Ω—Ç—ã –±–∞–Ω–∫–∞ +"+Math.floor(interest));
}

update();
}

/* SAVE */

function save(){
localStorage.setItem("ecoSim",JSON.stringify(g));
}

function load(){
let s=localStorage.getItem("ecoSim");
if(s) g=JSON.parse(s);
else newGame();
}

load();
update();
</script>

</body>
</html>




















































































































