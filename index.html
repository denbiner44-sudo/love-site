<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–°–∏–º—É–ª—è—Ç–æ—Ä –Ø–Ω—É–∫–æ–≤–∏—á–∞ - –ò—Å—Ç–æ—Ä–∏—è –ë–∞–ª–∞–Ω–¥–µ—Ä–∞!</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {margin:0;font-family:Arial,sans-serif;background:linear-gradient(135deg,#0f172a,#020617);color:#e5e7eb;display:flex;justify-content:center;padding:10px;}
.container {width:100%;max-width:800px;background:#111827;padding:15px;border-radius:16px;box-shadow:0 15px 40px rgba(0,0,0,0.6);}
h1,h3,h4{margin:5px 0;}
.stats div,#inventory div,#achievements div{background:#1f2937;padding:8px;border-radius:10px;margin:4px 0;display:flex;align-items:center;justify-content:space-between;}
.stats span.progress{display:inline-block;height:8px;border-radius:4px;background:#16a34a;margin-left:6px;flex-grow:1;transition: width 0.3s ease;}
button{padding:10px;margin:4px;border:none;border-radius:8px;background:#22c55e;color:#052e16;cursor:pointer;display:flex;align-items:center;width:100%;justify-content:center;transition:0.2s;}
button:hover{background:#16a34a;}
button img{width:24px;height:24px;margin-right:6px;}
.map {display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:6px;margin-bottom:10px;}
#story{min-height:80px;margin-bottom:10px;background:#1f2937;padding:10px;border-radius:12px;font-size:16px;line-height:1.4;position:relative;}
.story-notify{position:absolute;top:-25px;left:0;width:100%;text-align:center;color:#facc15;font-weight:bold;animation:flashText 1s;}
@keyframes flashText{0%,100%{opacity:0;}50%{opacity:1;}}
.animated{animation:flash 0.4s ease;}
@keyframes flash{0%{background-color:#facc15;}50%{background-color:#1f2937;}100%{background-color:#facc15;}}
.inventory img{width:24px;height:24px;margin-right:6px;}
.actions,#shopItems{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:6px;max-height:250px;overflow-y:auto;margin-bottom:10px;}
</style>
</head>
<body>
<div class="container">
<h1>üßπ –°–∏–º—É–ª—è—Ç–æ—Ä –Ø–Ω—ã–∫ 80-–≥–æ </h1>

<div class="stats">
<h3>–í–∏–∫—Ç–æ—Ä –Ø–Ω—É–≤–∏—á</h3>
<div>üí∞ <span>–î–µ–Ω—å–≥–∏:</span> <span id="money">0</span> –≥—Ä–Ω | $: <span id="usd">0</span> | –ö—É—Ä—Å: <span id="rate">42.50</span> –≥—Ä–Ω/$</div>
<div>‚ù§Ô∏è <span>–ó–¥–æ—Ä–æ–≤—å–µ:</span> <span id="health">100</span> <span class="progress" id="healthBar"></span></div>
<div>üçó <span>–°—ã—Ç–æ—Å—Ç—å:</span> <span id="satiety">100</span> <span class="progress" id="satietyBar"></span></div>
<div>üòä <span>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:</span> <span id="mood">100</span> <span class="progress" id="moodBar"></span></div>
<div>‚≠ê <span>–†–µ–ø—É—Ç–∞—Ü–∏—è:</span> <span id="rep">0</span></div>
<div>‚ö° <span>–û–ø—ã—Ç:</span> <span id="xp">0</span> | –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span> <span class="progress" id="xpBar"></span></div>
<div>üí™ <span>–°–∏–ª–∞:</span> <span id="str">5</span> | üß† <span>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç:</span> <span id="int">5</span> | ü§ù <span>–•–∞—Ä–∏–∑–º–∞:</span> <span id="cha">5</span></div>
<div>üïí <span>–î–µ–Ω—å:</span> <span id="day">1</span> | <span>–ú–µ—Å—è—Ü:</span> <span id="month">1</span></div>
</div>

<div id="story"></div>

<div class="map">
<button onclick="goTo('home')">üè† –î–æ–º</button>
<button onclick="goTo('work')">üíº –†–∞–±–æ—Ç–∞</button>
<button onclick="goTo('shop')">üõí –ú–∞–≥–∞–∑–∏–Ω</button>
<button onclick="goTo('school')">üè´ –®–∫–æ–ª–∞</button>
<button onclick="goTo('park')">üå≥ –ü–∞—Ä–∫</button>
<button onclick="goTo('crime')">üïµÔ∏è –ö—Ä–∏–º–∏–Ω–∞–ª</button>
<button onclick="goTo('hospital')">üè• –ë–æ–ª—å–Ω–∏—Ü–∞</button>
<button onclick="exchangeCurrencyUI()">üí± –û–±–º–µ–Ω–Ω–∏–∫</button>
<button onclick="recycle()">‚ôªÔ∏è –°–¥–∞—Ç—å –±—É—Ç—ã–ª–∫–∏</button>
<button onclick="goTo('casino')">üé∞ –ö–∞–∑–∏–Ω–æ</button>
<button onclick="resetGame()" style="background:#f87171;">üóëÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
</div>

<div class="actions" id="actions"></div>
<div class="actions" id="shopItems"></div>
<div class="inventory" id="inventory"><h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3></div>
<div id="achievements"><h3>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3></div>
<button id="restart" onclick="startGame()" style="display:none;">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>

<script>
// ---------- STATE ----------
let state;
const achievements = new Set();
let rate = 42.5;

const properties = { "–ü–∞–ª–∞—Ç–∫–∞":500, "–ß–µ—Ä–¥–∞–∫":2000, "–ö–≤–∞—Ä—Ç–∏—Ä–∞":10000, "–î–æ–º":40000, "–ü–µ–Ω—Ç—Ö–∞—É—Å":200000 };
const transport = { "–ö—Ä–æ—Å—Å–æ–≤–∫–∏":0, "–í–µ–ª–æ—Å–∏–ø–µ–¥":500, "–°–∫—É—Ç–µ—Ä":2000, "–ú–∞—à–∏–Ω–∞":10000, "–°–ø–æ—Ä—Ç–∫–∞—Ä":50000, "–í–µ—Ä—Ç–æ–ª–µ—Ç":200000 };
const education = { "–ê–∑–±—É–∫–∞":1000, "–ë—É–∫–≤–∞—Ä–∏–∫":5000, "–®–∫–æ–ª–∞":10000, "–ö–æ–ª–ª–µ–¥–∂":15000, "–£–Ω–∏–≤–µ—Ä":20000, "–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞":30000, "–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞":50000 };

const jobs = [
  {name:"–î–≤–æ—Ä–Ω–∏–∫", salary:50, level:1, property:null, transport:null, education:"–ê–∑–±—É–∫–∞"},
  {name:"–ü–æ—á—Ç–∞–ª—å–æ–Ω", salary:100, level:1, property:null, transport:null, education:"–ë—É–∫–≤–∞—Ä–∏–∫"},
  {name:"–¢–∞–∫—Å–∏—Å—Ç", salary:200, level:2, property:null, transport:"–ú–∞—à–∏–Ω–∞", education:"–®–∫–æ–ª–∞"},
  {name:"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç", salary:1000, level:5, property:null, transport:"–ú–∞—à–∏–Ω–∞", education:"–£–Ω–∏–≤–µ—Ä"},
  {name:"–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç", salary:10000, level:10, property:"–ü–µ–Ω—Ç—Ö–∞—É—Å", transport:"–í–µ—Ä—Ç–æ–ª–µ—Ç", education:"–î–æ–∫—Ç–æ—Ä–∞–Ω—Ç—É—Ä–∞"}
];

// ---------- START ----------
function startGame(){
  const savedState = localStorage.getItem('gameState');
  const savedAchievements = localStorage.getItem('achievements');

  if(savedState){
    state = JSON.parse(savedState);
    if(savedAchievements){
      const arr = JSON.parse(savedAchievements);
      achievements.clear();
      arr.forEach(a => achievements.add(a));
    }
    showStory("–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏...");
  } else {
    state={money:50,usd:0,health:100,satiety:100,mood:100,rep:0,xp:0,level:1,str:5,int:5,cha:5,day:1,month:1,inventory:[],inPrison:0,property:null,transport:null,education:null};
    achievements.clear();
    showStory("–ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∂–∏–∑–Ω—å! –í—ã–±–µ—Ä–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é.");
  }
  renderAchievements();
  updateUI();
  randomRate();
}

// ---------- RESET ----------
function resetGame(){
  localStorage.removeItem('gameState');
  localStorage.removeItem('achievements');
  achievements.clear();
  startGame();
}

// ---------- SAVE ----------
function saveGame(){
  localStorage.setItem('gameState', JSON.stringify(state));
  localStorage.setItem('achievements', JSON.stringify(Array.from(achievements)));
}

// ---------- UI ----------
function updateUI(){
  document.getElementById("money").textContent=state.money;
  document.getElementById("usd").textContent=state.usd.toFixed(2);
  document.getElementById("rate").textContent=rate.toFixed(2);
  document.getElementById("health").textContent=state.health;
  document.getElementById("satiety").textContent=state.satiety;
  document.getElementById("mood").textContent=state.mood;
  document.getElementById("rep").textContent=state.rep;
  document.getElementById("xp").textContent=state.xp;
  document.getElementById("level").textContent=state.level;
  document.getElementById("str").textContent=state.str;
  document.getElementById("int").textContent=state.int;
  document.getElementById("cha").textContent=state.cha;
  document.getElementById("day").textContent=state.day;
  document.getElementById("month").textContent=state.month;
  document.getElementById("healthBar").style.width=state.health+"%";
  document.getElementById("satietyBar").style.width=state.satiety+"%";
  document.getElementById("moodBar").style.width=state.mood+"%";
  document.getElementById("xpBar").style.width=Math.min(100,(state.xp/(state.level*50))*100)+"%";

  const invDiv=document.getElementById("inventory"); 
  invDiv.innerHTML="<h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>";
  state.inventory.forEach(item=>{ 
    const d=document.createElement("div"); 
    d.innerHTML=`<img src='https://img.icons8.com/ios-filled/24/ffffff/box.png'/>${item}`; 
    invDiv.appendChild(d); 
  });

  if(state.health<=0||state.satiety<=0||state.mood<=0){
    showStory("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! –í–∞—à–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ.");
    document.getElementById("restart").style.display="block";
    document.getElementById("actions").innerHTML="";
    document.getElementById("shopItems").innerHTML="";
  }

  saveGame();
}

// ---------- STORY ----------
function showStory(text){
  const story=document.getElementById("story");
  story.textContent=text;
}

// ---------- ACHIEVEMENTS ----------
function addAchievement(name){
  if(!achievements.has(name)){
    achievements.add(name);
    renderAchievements();
  }
}

function renderAchievements(){
  const div=document.getElementById("achievements");
  div.innerHTML="<h3>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>";
  achievements.forEach(a=>{
    const d=document.createElement("div");
    d.textContent="üèÖ "+a;
    div.appendChild(d);
  });
}

// ---------- ACTIONS ----------
function addAction(name,func){
  const actionsDiv=document.getElementById("actions");
  const btn=document.createElement("button");
  btn.textContent=name;
  btn.onclick=func;
  actionsDiv.appendChild(btn);
}

// ---------- STATS CHANGE ----------
function loseStats(amount=2){
  state.health=Math.max(0,state.health-amount);
  state.satiety=Math.max(0,state.satiety-amount);
  state.mood=Math.max(0,state.mood-amount);
}

// ---------- LOCATIONS & FULL GAME LOGIC ----------
function goTo(location){
  loseStats(); // –∫–∞–∂–¥—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Å–Ω–∏–∂–∞–µ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
  document.getElementById("actions").innerHTML="";
  document.getElementById("shopItems").innerHTML="";

  switch(location){
    case 'home':
      showStory("–í—ã –¥–æ–º–∞. –ú–æ–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –∏ —É–ª—É—á—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ.");
      addAction("–û—Ç–¥–æ—Ö–Ω—É—Ç—å (+10 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è)",()=>{
        state.mood=Math.min(100,state.mood+10);
        showStory("–í—ã –æ—Ç–¥–æ—Ö–Ω—É–ª–∏ –¥–æ–º–∞. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —É–ª—É—á—à–∏–ª–æ—Å—å!");
        updateUI();
      });
      if(state.property){
        addAction("–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π –¥–æ–º",()=>showStory(`–í—ã –∂–∏–≤—ë—Ç–µ –≤: ${state.property}`));
      }
      break;

    case 'work':
      showStory("–í—ã –∏–¥—ë—Ç–µ –Ω–∞ —Ä–∞–±–æ—Ç—É. –ü–æ–ª—É—á–∏—Ç–µ –¥–µ–Ω—å–≥–∏ –∑–∞ –¥–µ–Ω—å.");
      jobs.forEach(job=>{
        addAction(job.name,()=>{
          if(state.level>=job.level && (job.education==null || state.education==job.education)){
            state.money+=job.salary;
            state.xp+=job.salary/10;
            showStory(`–í—ã –ø–æ—Ä–∞–±–æ—Ç–∞–ª–∏ –∫–∞–∫ ${job.name} –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${job.salary} –≥—Ä–Ω.`);
            addAchievement(`–†–∞–±–æ—Ç–∞–ª ${job.name}`);
            updateUI();
          } else {
            showStory("–í—ã –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–ø—ã—Ç–Ω—ã –∏–ª–∏ –Ω–µ –∏–º–µ–µ—Ç–µ –Ω—É–∂–Ω–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–ª—è —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã.");
          }
        });
      });
      break;

    case 'shop':
      showStory("–í—ã –ø—Ä–∏—à–ª–∏ –≤ –º–∞–≥–∞–∑–∏–Ω. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å –∏–º—É—â–µ—Å—Ç–≤–æ, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏–ª–∏ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ.");
      Object.keys(properties).forEach(p=>{
        addShopItem(p,properties[p],"property");
      });
      Object.keys(transport).forEach(t=>{
        addShopItem(t,transport[t],"transport");
      });
      Object.keys(education).forEach(e=>{
        addShopItem(e,education[e],"education");
      });
      break;

    case 'school':
      showStory("–í—ã –ø–æ—Å–µ—â–∞–µ—Ç–µ —à–∫–æ–ª—É/—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç. –ú–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –æ–ø—ã—Ç.");
      addAction("–£—á–∏—Ç—å—Å—è (+10 –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞, +20 XP)",()=>{
        state.int=Math.min(100,state.int+10);
        state.xp+=20;
        showStory("–í—ã —É—á–∏—Ç–µ—Å—å –∏ –ø–æ–≤—ã—à–∞–µ—Ç–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç.");
        updateUI();
      });
      break;

    case 'park':
      showStory("–í—ã –ø—Ä–∏—à–ª–∏ –≤ –ø–∞—Ä–∫. –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—é.");
      addAction("–ü—Ä–æ–≥—É–ª—è—Ç—å—Å—è (+10 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, +1 —Ä–µ–ø—É—Ç–∞—Ü–∏—è)",()=>{
        state.mood=Math.min(100,state.mood+10);
        state.rep+=1;
        showStory("–ü—Ä–æ–≥—É–ª–∫–∞ –≤ –ø–∞—Ä–∫–µ —É–ª—É—á—à–∏–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—é.");
        updateUI();
      });
      break;

    case 'crime':
      showStory("–í—ã –ø—Ä–æ–±—É–µ—Ç–µ –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—ã–µ –¥–µ–ª–∞. –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –±–æ–ª—å—à–∏–µ –¥–µ–Ω—å–≥–∏.");
      const crimeActions=[
        {name:"–£–∫—Ä–∞—Å—Ç—å –∫–æ—à–µ–ª–µ–∫ (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫)",chance:0.7,money:100,health:10,mood:5,rep:0},
        {name:"–û–≥—Ä–∞–±–∏—Ç—å –º–∞–≥–∞–∑–∏–Ω (—Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫)",chance:0.5,money:500,health:30,mood:15,rep:5},
        {name:"–£–∫—Ä–∞—Å—Ç—å –º–∞—à–∏–Ω—É (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫)",chance:0.4,money:2000,health:50,mood:25,rep:10},
        {name:"–®–∞–Ω—Ç–∞–∂/–ø–æ—Ö–∏—â–µ–Ω–∏–µ (–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫)",chance:0.3,money:5000,health:70,mood:40,rep:20}
      ];
      crimeActions.forEach(c=>{
        addAction(c.name,()=>{
          if(Math.random()<c.chance){
            state.money+=c.money;
            state.rep+=c.rep;
            showStory(`–£—Å–ø–µ—Ö! +${c.money} –≥—Ä–Ω, +${c.rep} —Ä–µ–ø—É—Ç–∞—Ü–∏–∏`);
          } else {
            state.money = Math.max(0,state.money-Math.floor(c.money/2));
            state.health=Math.max(0,state.health-c.health);
            state.mood=Math.max(0,state.mood-c.mood);
            state.rep=Math.max(0,state.rep-c.rep);
            showStory(`–ü—Ä–æ–≤–∞–ª! –ü–æ—Ç–µ—Ä—è: ${Math.floor(c.money/2)} –≥—Ä–Ω, -${c.health} –∑–¥–æ—Ä–æ–≤—å—è, -${c.mood} –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è, -${c.rep} —Ä–µ–ø—É—Ç–∞—Ü–∏–∏`);
          }
          updateUI();
        });
      });
      break;

    case 'hospital':
      showStory("–í—ã –≤ –±–æ–ª—å–Ω–∏—Ü–µ. –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ.");
      addAction("–õ–µ—á–µ–Ω–∏–µ (-50 –≥—Ä–Ω, +50 –∑–¥–æ—Ä–æ–≤—å—è)",()=>{
        if(state.money>=50){
          state.money-=50;
          state.health=Math.min(100,state.health+50);
          showStory("–í—ã –ø—Ä–æ—à–ª–∏ –ª–µ—á–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–¥–æ—Ä–æ–≤—å–µ.");
        } else showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ –Ω–∞ –ª–µ—á–µ–Ω–∏–µ.");
        updateUI();
      });
      break;

    case 'casino':
      showStory("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–∞–∑–∏–Ω–æ! –°—Ç–∞–≤—å—Ç–µ –¥–µ–Ω—å–≥–∏ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —É–¥–∞—á—É.");
      addAction("–†—É–ª–µ—Ç–∫–∞ 100 –≥—Ä–Ω (50% —à–∞–Ω—Å —É–¥–≤–æ–∏—Ç—å)",()=>{
        if(state.money>=100){
          state.money-=100;
          if(Math.random()<0.5){
            state.money+=200;
            showStory("–í–∞–º –ø–æ–≤–µ–∑–ª–æ! –í—ã —É–¥–≤–æ–∏–ª–∏ —Å—Ç–∞–≤–∫—É!");
          } else {
            showStory("–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ —Å—Ç–∞–≤–∫—É.");
          }
        } else showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥.");
        updateUI();
      });
      break;

    default:
      showStory("–õ–æ–∫–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.");
  }

  updateUI();
}

// ---------- SHOP ----------
function addShopItem(name,price,type){
  const shopDiv=document.getElementById("shopItems");
  const btn=document.createElement("button");
  btn.textContent=`${name} - ${price} –≥—Ä–Ω`;
  btn.onclick=()=>{
    if(state.money>=price){
      state.money-=price;
      if(type==="property") state.property=name;
      if(type==="transport") state.transport=name;
      if(type==="education") state.education=name;
      showStory(`–í—ã –∫—É–ø–∏–ª–∏ ${name}!`);
      addAchievement(`–ö—É–ø–∏–ª ${name}`);
    } else {
      showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥.");
    }
    updateUI();
  };
  shopDiv.appendChild(btn);
}

// ---------- CURRENCY EXCHANGE ----------
function exchangeCurrencyUI(){
  const usdAmount=prompt("–°–∫–æ–ª—å–∫–æ USD –∫—É–ø–∏—Ç—å/–ø—Ä–æ–¥–∞—Ç—å?");
  const val=parseFloat(usdAmount);
  if(isNaN(val)) return;
  const action=prompt("buy/sell?");
  if(action==="buy" && state.money>=val*rate){
    state.money-=val*rate;
    state.usd+=val;
    showStory(`–í—ã –∫—É–ø–∏–ª–∏ ${val} $`);
  } else if(action==="sell" && state.usd>=val){
    state.money+=val*rate;
    state.usd-=val;
    showStory(`–í—ã –ø—Ä–æ–¥–∞–ª–∏ ${val} $`);
  } else showStory("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤.");
  updateUI();
}

// ---------- RECYCLE ----------
function recycle(){
  let bottles = state.inventory.filter(i=>i==="–ë—É—Ç—ã–ª–∫–∞").length;
  if(bottles>0){
    state.money+=bottles*5;
    state.inventory=state.inventory.filter(i=>i!=="–ë—É—Ç—ã–ª–∫–∞");
    showStory(`–í—ã —Å–¥–∞–ª–∏ ${bottles} –±—É—Ç—ã–ª–æ–∫ –∑–∞ ${bottles*5} –≥—Ä–Ω`);
  } else showStory("–ë—É—Ç—ã–ª–æ–∫ –Ω–µ—Ç.");
  updateUI();
}

// ---------- RANDOM RATE ----------
function randomRate(){
  rate=42+Math.random()*3; 
  updateUI();
}

// ---------- START GAME ----------
startGame();
</script>
</div>
</body>
</html>














































































































