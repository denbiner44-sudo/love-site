<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>–ö–ª–∏–∫–µ—Ä –ë–æ–º–∂–∞ PRO 4.5 EVOLUTION v2</title>

<style>
body{
margin:0;
font-family:Arial;
background:#0f0f0f;
color:#fff;
text-align:center;
touch-action:manipulation;
-webkit-user-select:none;
user-select:none;
}

.panel{
border:2px solid #222;
margin:6px;
padding:8px;
border-radius:10px
}

button{
padding:6px;
margin:3px;
border:none;
border-radius:6px;
cursor:pointer;
}

.green{background:#2ecc71}
.blue{background:#3498db}
.orange{background:#e67e22}
.red{background:#e74c3c}

.bar{
height:10px;
background:#333;
border-radius:6px;
overflow:hidden;
margin:4px 0;
}

.fill{
height:100%;
background:#2ecc71;
}
</style>
</head>
<body>

<h2>üî• –ö–ª–∏–∫–µ—Ä –ë–æ–º–∂–∞ PRO 4.5 EVOLUTION v2</h2>

<div class="panel">
üí∞ –ù–∞–ª–∏—á–Ω—ã–µ: <span id="money"></span><br>
üí∞ –°–µ–π—Ñ: <span id="safe"></span><br>
üè¶ –ë–∞–Ω–∫: <span id="bank"></span><br>
‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level"></span><br>
‚ö° –ë–æ–Ω—É—Å: x<span id="bonus"></span><br>
üñ±Ô∏è –°–∏–ª–∞ –∫–ª–∏–∫–∞: x<span id="clickPower"></span><br>
üåç –≠–∫–æ–Ω–æ–º–∏–∫–∞: <span id="eco"></span>
</div>

<button class="green" id="clickBtn">–ö–ª–∏–∫</button>
<button onclick="moveSafe()">–í —Å–µ–π—Ñ</button>
<button onclick="moveBank()">–í –±–∞–Ω–∫</button>

<div class="panel">
<h3>üè¢ –ë–∏–∑–Ω–µ—Å</h3>
<div id="biz"></div>
</div>

<script>

// ‚úÖ –ê–ù–¢–ò-–ó–£–ú
document.addEventListener('touchstart', e => { if(e.touches.length>1) e.preventDefault(); }, {passive:false});
let lastTouchEnd=0;
document.addEventListener('touchend', e => { 
let now=Date.now(); 
if(now-lastTouchEnd<=300) e.preventDefault(); 
lastTouchEnd=now; 
}, false);

//////////////// –ò–ì–†–ê //////////////////

const baseGame={
money:0,
safe:0,
bank:0,
level:1,
bonus:1,
clickPower:1,
eco:1,
ecoTimer:0,
business:[]
};

const names=[
"–ö–∏–æ—Å–∫","–ú–∞–≥–∞–∑–∏–Ω","–ö–∞—Ñ–µ","–ó–∞–≤–æ–¥","–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",
"–¢–¶","IT —Ñ–∏—Ä–º–∞","–ù–µ—Ñ—Ç–µ–≤—ã—à–∫–∞","–ê—ç—Ä–æ–ø–æ—Ä—Ç","–ö–∞–∑–∏–Ω–æ",
"–ë–∞–Ω–∫","–ó–∞–≤–æ–¥ –¥—Ä–æ–Ω–æ–≤","–ö—Ä–∏–ø—Ç–æ—Ñ–µ—Ä–º–∞","–ö–æ—Å–º–æ–¥—Ä–æ–º","–•–æ–ª–¥–∏–Ω–≥"
];

names.forEach((n,i)=>{
baseGame.business.push({
name:n,
cost:100*Math.pow(3,i),
income:2*Math.pow(2,i),
owned:0,
upgrade:0,
storageLevel:0,
stored:0,
overflowTimer:0,
manager:false
});
});

let game=JSON.parse(localStorage.getItem("beggar45ev2"))||structuredClone(baseGame);

//////////////// SAVE //////////////////

function save(){localStorage.setItem("beggar45ev2",JSON.stringify(game));}

//////////////// –ö–õ–ò–ö //////////////////

const clickBtn=document.getElementById("clickBtn");
clickBtn.addEventListener('click',()=>{

let gain=game.clickPower*game.bonus*game.eco;
game.money+=gain;

// –≤–∏–∑—É–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞
clickBtn.style.transform="scale(1.2)";
setTimeout(()=>{clickBtn.style.transform="scale(1)";},80);

updateLevel();
update();
});

//////////////// SAFE / BANK //////////////////

function moveSafe(){game.safe+=game.money; game.money=0;}
function moveBank(){game.bank+=game.money; game.money=0;}

//////////////// LEVEL //////////////////

function updateLevel(){
let total=game.money+game.safe+game.bank;
let lvl=Math.floor(Math.log10(total+1))+1;
if(lvl>game.level){game.level=lvl; game.bonus=1+(game.level-1)*0.1;}
}

//////////////// ECONOMY //////////////////

function ecoTick(){
game.ecoTimer++;
if(game.ecoTimer>20){
game.ecoTimer=0;
let r=Math.random();
if(r<0.25){game.eco=0.6; setEco("üí• –ö—Ä–∏–∑–∏—Å")}
else if(r<0.5){game.eco=0.8; setEco("üìâ –°–ø–∞–¥")}
else if(r<0.75){game.eco=1.2; setEco("üìà –†–æ—Å—Ç")}
else{game.eco=1.5; setEco("üöÄ –ë—É–º")}
}
}
function setEco(t){document.getElementById("eco").innerText=t;}

//////////////// BUSINESS //////////////////

function buy(i){let b=game.business[i]; if(game.money<b.cost) return; game.money-=b.cost; b.owned++; b.cost=Math.floor(b.cost*1.4);}
function collect(i){let b=game.business[i]; game.money+=b.stored; b.stored=0; b.overflowTimer=0;}
function hire(i){let b=game.business[i]; let price=500*(i+1); if(game.money<price||b.manager) return; game.money-=price; b.manager=true;}
function upIncome(i){let b=game.business[i]; let price=200*(b.upgrade+1); if(game.money<price) return; game.money-=price; b.upgrade++;}
function upStorage(i){let b=game.business[i]; let price=250*(b.storageLevel+1); if(game.money<price) return; game.money-=price; b.storageLevel++;}

//////////////// LOOP //////////////////

setInterval(()=>{

ecoTick();

// –±–∞–Ω–∫ –ø—Ä–æ—Ü–µ–Ω—Ç—ã
if(Date.now()%10000<1000) game.bank*=1.05;

game.business.forEach(b=>{
if(b.owned>0){
let max=b.owned*150*(b.storageLevel+1);
let add=b.owned*b.income*(b.upgrade+1)*game.eco;

if(b.stored<max){b.stored+=add*game.bonus;}
else{b.overflowTimer++; if(b.overflowTimer>5){b.stored*=0.8; b.overflowTimer=0;}}

if(b.manager && b.stored>0){game.money+=b.stored; b.stored=0;}
}
});

updateLevel();
update();
save();

},1000);

//////////////// UI //////////////////

function update(){

document.getElementById("money").innerText=Math.floor(game.money);
document.getElementById("safe").innerText=Math.floor(game.safe);
document.getElementById("bank").innerText=Math.floor(game.bank);
document.getElementById("level").innerText=game.level;
document.getElementById("bonus").innerText=game.bonus.toFixed(1);
document.getElementById("clickPower").innerText=game.clickPower.toFixed(1);

let d=document.getElementById("biz"); d.innerHTML="";

game.business.forEach((b,i)=>{
let max=b.owned*150*(b.storageLevel+1);
let percent=max>0?Math.min(100,(b.stored/max)*100):0;
d.innerHTML+=`
<div class="panel">
<b>${b.name}</b><br>
x${b.owned}<br>
–°–∫–ª–∞–¥: ${Math.floor(b.stored)} / ${max}
<div class="bar"><div class="fill" style="width:${percent}%"></div></div>
${b.overflowTimer>0?"‚è≥ –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ!":""}<br>
<button onclick="buy(${i})">–ö—É–ø–∏—Ç—å (${b.cost}$)</button>
<button class="blue" onclick="upIncome(${i})">–î–æ—Ö–æ–¥ (${200*(b.upgrade+1)}$)</button>
<button class="orange" onclick="upStorage(${i})">–°–∫–ª–∞–¥ (${250*(b.storageLevel+1)}$)</button>
${!b.manager?`<button onclick="collect(${i})">–°–æ–±—Ä–∞—Ç—å</button>
<button onclick="hire(${i})">–ú–µ–Ω–µ–¥–∂–µ—Ä (${500*(i+1)}$)</button>`:"üëî –ê–≤—Ç–æ —Å–±–æ—Ä"}
</div>`;
});
}

setEco("–°—Ç–∞–±–∏–ª—å–Ω–æ");
update();

</script>
</body>
</html>

.bar{
height:10px;
background:#333;
border-radius:6px;
overflow:hidden;
margin:4px 0;
}

.fill{
height:100%;
background:#2ecc71;
}
</style>
</head>
<body>

<h2>üî• –ö–ª–∏–∫–µ—Ä –ë–æ–º–∂–∞ PRO 4.5 EVOLUTION</h2>

<div class="panel">
üí∞ –ù–∞–ª–∏—á–Ω—ã–µ: <span id="money"></span><br>
üí∞ –°–µ–π—Ñ: <span id="safe"></span><br>
üè¶ –ë–∞–Ω–∫: <span id="bank"></span><br>
‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level"></span><br>
‚ö° –ë–æ–Ω—É—Å: x<span id="bonus"></span><br>
üåç –≠–∫–æ–Ω–æ–º–∏–∫–∞: <span id="eco"></span>
</div>

<button class="green" onclick="clickMoney()">–ö–ª–∏–∫</button>
<button onclick="moveSafe()">–í —Å–µ–π—Ñ</button>
<button onclick="moveBank()">–í –±–∞–Ω–∫</button>

<div class="panel">
<h3>üè¢ –ë–∏–∑–Ω–µ—Å</h3>
<div id="biz"></div>
</div>

<script>

const baseGame={
money:0,
safe:0,
bank:0,
level:1,
bonus:1,
economy:1,
ecoTimer:0,

business:[]
};

const names=[
"–ö–∏–æ—Å–∫","–ú–∞–≥–∞–∑–∏–Ω","–ö–∞—Ñ–µ","–ó–∞–≤–æ–¥","–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",
"–¢–¶","IT —Ñ–∏—Ä–º–∞","–ù–µ—Ñ—Ç–µ–≤—ã—à–∫–∞","–ê—ç—Ä–æ–ø–æ—Ä—Ç","–ö–∞–∑–∏–Ω–æ",
"–ë–∞–Ω–∫","–ó–∞–≤–æ–¥ –¥—Ä–æ–Ω–æ–≤","–ö—Ä–∏–ø—Ç–æ—Ñ–µ—Ä–º–∞","–ö–æ—Å–º–æ–¥—Ä–æ–º","–•–æ–ª–¥–∏–Ω–≥"
];

names.forEach((n,i)=>{
baseGame.business.push({
name:n,
cost:100*Math.pow(3,i),
income:2*Math.pow(2,i),
owned:0,
upgrade:0,
storageLevel:0,
stored:0,
overflowTimer:0,
manager:false
});
});

let game=JSON.parse(localStorage.getItem("beggar45e"))||structuredClone(baseGame);

//////////////// SAVE //////////////////

function save(){
localStorage.setItem("beggar45e",JSON.stringify(game));
}

//////////////// CLICK //////////////////

function clickMoney(){
game.money+=1*game.bonus;
updateLevel();
}

//////////////// SAFE / BANK //////////////////

function moveSafe(){
game.safe+=game.money;
game.money=0;
}

function moveBank(){
game.bank+=game.money;
game.money=0;
}

//////////////// LEVEL //////////////////

function updateLevel(){
let total=game.money+game.safe+game.bank;
let lvl=Math.floor(Math.log10(total+1))+1;
if(lvl>game.level){
game.level=lvl;
game.bonus=1+(game.level-1)*0.1;
}
}

//////////////// ECONOMY //////////////////

function ecoTick(){
game.ecoTimer++;
if(game.ecoTimer>20){
game.ecoTimer=0;
let r=Math.random();

if(r<0.25){game.economy=0.6;setEco("üí• –ö—Ä–∏–∑–∏—Å")}
else if(r<0.5){game.economy=0.8;setEco("üìâ –°–ø–∞–¥")}
else if(r<0.75){game.economy=1.2;setEco("üìà –†–æ—Å—Ç")}
else{game.economy=1.5;setEco("üöÄ –ë—É–º")}
}
}

function setEco(t){
document.getElementById("eco").innerText=t;
}

//////////////// BUSINESS //////////////////

function buy(i){
let b=game.business[i];
if(game.money<b.cost)return;
game.money-=b.cost;
b.owned++;
b.cost=Math.floor(b.cost*1.4);
}

function collect(i){
let b=game.business[i];
game.money+=b.stored;
b.stored=0;
b.overflowTimer=0;
}

function hire(i){
let b=game.business[i];
let price=500*(i+1);
if(game.money<price||b.manager)return;
game.money-=price;
b.manager=true;
}

function upIncome(i){
let b=game.business[i];
let price=200*(b.upgrade+1);
if(game.money<price)return;
game.money-=price;
b.upgrade++;
}

function upStorage(i){
let b=game.business[i];
let price=250*(b.storageLevel+1);
if(game.money<price)return;
game.money-=price;
b.storageLevel++;
}

//////////////// LOOP //////////////////

setInterval(()=>{

ecoTick();

// –ø—Ä–æ—Ü–µ–Ω—Ç—ã –±–∞–Ω–∫–∞ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫
if(Date.now()%10000<1000){
game.bank*=1.05;
}

game.business.forEach(b=>{

if(b.owned>0){

let max=b.owned*150*(b.storageLevel+1);
let add=b.owned*b.income*(b.upgrade+1)*game.economy;

if(b.stored<max){
b.stored+=add*game.bonus;
}
else{
b.overflowTimer++;
if(b.overflowTimer>5){
b.stored*=0.8;
b.overflowTimer=0;
}
}

if(b.manager && b.stored>0){
game.money+=b.stored;
b.stored=0;
}
}
});

updateLevel();
update();
save();

},1000);

//////////////// UI //////////////////

function update(){

document.getElementById("money").innerText=Math.floor(game.money);
document.getElementById("safe").innerText=Math.floor(game.safe);
document.getElementById("bank").innerText=Math.floor(game.bank);
document.getElementById("level").innerText=game.level;
document.getElementById("bonus").innerText=game.bonus.toFixed(1);

let d=document.getElementById("biz");
d.innerHTML="";

game.business.forEach((b,i)=>{

let max=b.owned*150*(b.storageLevel+1);
let percent=max>0?Math.min(100,(b.stored/max)*100):0;

d.innerHTML+=`
<div class="panel">
<b>${b.name}</b><br>
x${b.owned}<br>
–°–∫–ª–∞–¥: ${Math.floor(b.stored)} / ${max}

<div class="bar">
<div class="fill" style="width:${percent}%"></div>
</div>

${b.overflowTimer>0?"‚è≥ –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ!":""}

<br>

<button onclick="buy(${i})">–ö—É–ø–∏—Ç—å (${b.cost}$)</button>
<button class="blue" onclick="upIncome(${i})">
–î–æ—Ö–æ–¥ (${200*(b.upgrade+1)}$)
</button>
<button class="orange" onclick="upStorage(${i})">
–°–∫–ª–∞–¥ (${250*(b.storageLevel+1)}$)
</button>

${!b.manager?
`<button onclick="collect(${i})">–°–æ–±—Ä–∞—Ç—å</button>
<button onclick="hire(${i})">
–ú–µ–Ω–µ–¥–∂–µ—Ä (${500*(i+1)}$)
</button>`
:"üëî –ê–≤—Ç–æ —Å–±–æ—Ä"}

</div>
`;
});

}

setEco("–°—Ç–∞–±–∏–ª—å–Ω–æ");
update();

</script>
</body>
</html>
‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level"></span><br>
‚ö° –ë–æ–Ω—É—Å: x<span id="bonus"></span><br>
üåç –≠–∫–æ–Ω–æ–º–∏–∫–∞: <span id="economy"></span>
</div>

<button class="green" onclick="clickMoney()">–ö–ª–∏–∫</button>

<div class="panel">
<h3>üè¢ –ë–∏–∑–Ω–µ—Å</h3>
<div id="biz"></div>
</div>

<div class="panel">
<h3>üëî –ú–µ–Ω–µ–¥–∂–µ—Ä—ã</h3>
<div id="managers"></div>
</div>

<script>

/* –∞–Ω—Ç–∏-–∑—É–º */
document.addEventListener('touchstart',e=>{
if(e.touches.length>1)e.preventDefault();
},{passive:false});

let lastTouchEnd=0;
document.addEventListener('touchend',e=>{
let now=Date.now();
if(now-lastTouchEnd<=300)e.preventDefault();
lastTouchEnd=now;
},false);

//////////////// BASE //////////////////

const baseGame={
money:0,
income:0,
clickPower:1,
level:1,
bonus:1,
economy:1,
crisisTimer:0,

business:[
{name:"–ö–∏–æ—Å–∫",cost:100,income:2,owned:0,upgrade:0,manager:false},
{name:"–ú–∞–≥–∞–∑–∏–Ω",cost:500,income:6,owned:0,upgrade:0,manager:false},
{name:"–ö–∞—Ñ–µ",cost:2000,income:15,owned:0,upgrade:0,manager:false},
{name:"–ó–∞–≤–æ–¥",cost:8000,income:40,owned:0,upgrade:0,manager:false},
{name:"–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",cost:40000,income:120,owned:0,upgrade:0,manager:false}
],

lastTime:Date.now()
};

let game;

//////////////// CLICK //////////////////

function clickMoney(){
game.money+=game.clickPower*game.bonus;
updateLevel();
update();
}

//////////////// SAVE //////////////////

function save(){
game.lastTime=Date.now();
localStorage.setItem("beggarV44",JSON.stringify(game));
}

function load(){
let s=localStorage.getItem("beggarV44");

game=s
?Object.assign(structuredClone(baseGame),JSON.parse(s))
:structuredClone(baseGame);

recalcIncome();

let offlineSec=Math.floor((Date.now()-game.lastTime)/1000);
offlineSec=Math.min(offlineSec,28800);

if(offlineSec>0){
let earn=offlineSec*
game.income*
game.bonus*
game.economy;

game.money+=earn;
alert("‚è≥ –û—Ñ—Ñ–ª–∞–π–Ω –¥–æ—Ö–æ–¥: +"+Math.floor(earn)+"$");
}
}

//////////////// INCOME //////////////////

function recalcIncome(){
let total=0;

game.business.forEach(b=>{
total+=b.owned*b.income*(b.upgrade+1);
});

game.income=total;
}

//////////////// LEVEL //////////////////

function updateLevel(){
let lvl=Math.floor(Math.log10(game.money+1))+1;

if(lvl>game.level){
game.level=lvl;
game.bonus=1+(game.level-1)*0.1;
}
}

//////////////// ECONOMY //////////////////

function economyTick(){

game.crisisTimer++;

if(game.crisisTimer>20){

game.crisisTimer=0;
let r=Math.random();

if(r<0.25){
game.economy=0.5;
setEconomyText("üí• –ö–†–ò–ó–ò–°");
}
else if(r<0.5){
game.economy=0.8;
setEconomyText("üìâ –°–ø–∞–¥");
}
else if(r<0.75){
game.economy=1.2;
setEconomyText("üìà –†–æ—Å—Ç");
}
else{
game.economy=1.5;
setEconomyText("üöÄ –ë—É–º");
}
}
}

function setEconomyText(text){
document.getElementById("economy").innerText=text;
}

//////////////// BUSINESS //////////////////

function buyBiz(i){
let b=game.business[i];
if(game.money<b.cost)return;

game.money-=b.cost;
b.owned++;
b.cost=Math.floor(b.cost*1.5);

recalcIncome();
}

function upgradeBiz(i){
let b=game.business[i];
let price=b.cost*2;

if(game.money<price)return;

game.money-=price;
b.upgrade++;

recalcIncome();
}

function drawBiz(){
let d=document.getElementById("biz");
d.innerHTML="";

game.business.forEach((b,i)=>{

d.innerHTML+=`
<div class="panel">
<b>${b.name}</b><br>
–¶–µ–Ω–∞: ${b.cost}$<br>
–î–æ—Ö–æ–¥: ${b.income*(b.upgrade+1)}<br>
–í–ª–∞–¥–µ–Ω–∏–µ: x${b.owned}<br>
–ê–ø–≥—Ä–µ–π–¥: ${b.upgrade}<br>
<button onclick="buyBiz(${i})">–ö—É–ø–∏—Ç—å</button>
<button class="blue" onclick="upgradeBiz(${i})">
–ê–ø–≥—Ä–µ–π–¥ (${b.cost*2}$)
</button>
</div>
`;
});
}

//////////////// MANAGERS //////////////////

function hireManager(i){
let b=game.business[i];
let price=b.cost*5;

if(game.money<price||b.manager)return;

game.money-=price;
b.manager=true;
}

function managerTick(){
game.business.forEach((b,i)=>{
if(b.manager && game.money>=b.cost){
buyBiz(i);
}
});
}

function drawManagers(){
let d=document.getElementById("managers");
d.innerHTML="";

game.business.forEach((b,i)=>{

d.innerHTML+=`
<button onclick="hireManager(${i})">
${b.name}: ${b.manager?"‚úÖ":"–ù–∞–Ω—è—Ç—å ("+b.cost*5+"$)"}
</button><br>
`;
});
}

//////////////// LOOP //////////////////

setInterval(()=>{

managerTick();
economyTick();

game.money+=game.income*game.bonus*game.economy;

updateLevel();
update();

},1000);

//////////////// UI //////////////////

function update(){

document.getElementById("money").innerText=Math.floor(game.money);
document.getElementById("income").innerText=
Math.floor(game.income*game.bonus*game.economy);
document.getElementById("level").innerText=game.level;
document.getElementById("bonus").innerText=
game.bonus.toFixed(1);

drawBiz();
drawManagers();
save();
}

//////////////// START //////////////////

load();
setEconomyText("–°—Ç–∞–±–∏–ª—å–Ω–æ");
update();

</script>
</body>
</html>
<body>

<h2>üî• –ö–ª–∏–∫–µ—Ä –ë–æ–º–∂–∞ PRO 4.3 (FIXED)</h2>

<div class="panel">
üí∞ –î–µ–Ω—å–≥–∏: <span id="money"></span><br>
üè¢ –î–æ—Ö–æ–¥/—Å–µ–∫: <span id="income"></span><br>
‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level"></span><br>
‚ö° –ë–æ–Ω—É—Å: x<span id="bonus"></span><br>
üåç –≠–∫–æ–Ω–æ–º–∏–∫–∞: <span id="economy"></span>
</div>

<button class="green" onclick="clickMoney()">–ö–ª–∏–∫</button>

<div class="panel">
<h3>üè¢ –ë–∏–∑–Ω–µ—Å</h3>
<div id="biz"></div>
</div>

<div class="panel">
<h3>üëî –ú–µ–Ω–µ–¥–∂–µ—Ä—ã</h3>
<div id="managers"></div>
</div>

<script>

/* ‚úÖ JS –∞–Ω—Ç–∏-–∑—É–º (–¥–≤–æ–π–Ω–æ–π —Ç–∞–ø) */
document.addEventListener('touchstart',e=>{
if(e.touches.length>1)e.preventDefault();
},{passive:false});

let lastTouchEnd=0;
document.addEventListener('touchend',e=>{
let now=Date.now();
if(now-lastTouchEnd<=300)e.preventDefault();
lastTouchEnd=now;
},false);

//////////////// BASE //////////////////

const baseGame={
money:0,
income:0,
clickPower:1,
level:1,
bonus:1,
economy:1,
crisisTimer:0,

business:[
{name:"–ö–∏–æ—Å–∫",cost:100,income:2,owned:0,upgrade:0,manager:false},
{name:"–ú–∞–≥–∞–∑–∏–Ω",cost:500,income:6,owned:0,upgrade:0,manager:false},
{name:"–ö–∞—Ñ–µ",cost:2000,income:15,owned:0,upgrade:0,manager:false},
{name:"–ó–∞–≤–æ–¥",cost:8000,income:40,owned:0,upgrade:0,manager:false},
{name:"–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",cost:40000,income:120,owned:0,upgrade:0,manager:false}
],

lastTime:Date.now()
};

let game;

//////////////// SAVE //////////////////

function save(){
game.lastTime=Date.now();
localStorage.setItem("beggarV43",JSON.stringify(game));
}

function load(){
let s=localStorage.getItem("beggarV43");
game=s?Object.assign(structuredClone(baseGame),JSON.parse(s))
:structuredClone(baseGame);

recalcIncome();

let offlineSec=Math.floor((Date.now()-game.lastTime)/1000);
offlineSec=Math.min(offlineSec,28800);

if(offlineSec>0){
let earn=offlineSec*
game.income*
game.bonus*
game.economy;

game.money+=earn;
alert("‚è≥ –û—Ñ—Ñ–ª–∞–π–Ω –¥–æ—Ö–æ–¥: +"+Math.floor(earn)+"$");
}
}

//////////////// INCOME //////////////////

function recalcIncome(){
let total=0
update();
}

//////////////// LEVEL //////////////////

function updateLevel(){
let lvl=Math.floor(Math.log10(game.money+1))+1;
if(lvl>game.level){
game.level=lvl;
game.bonus=1+(game.level-1)*0.1;
}
}

//////////////// ECONOMY //////////////////

function economyTick(){

game.crisisTimer++;

if(game.crisisTimer>20){

game.crisisTimer=0;

let r=Math.random();

if(r<0.25){
game.economy=0.5;
setEconomyText("üí• –ö–†–ò–ó–ò–°");
}
else if(r<0.5){
game.economy=0.8;
setEconomyText("üìâ –°–ø–∞–¥");
}
else if(r<0.75){
game.economy=1.2;
setEconomyText("üìà –†–æ—Å—Ç");
}
else{
game.economy=1.5;
setEconomyText("üöÄ –ë—É–º");
}
}
}

function setEconomyText(text){
document.getElementById("economy").innerText=text;
}

//////////////// BUSINESS //////////////////

function buyBiz(i){
let b=game.business[i];
if(game.money<b.cost)return;

game.money-=b.cost;
b.owned++;

game.income+=b.income*(b.upgrade+1);
b.cost=Math.floor(b.cost*1.5);
}

function upgradeBiz(i){
let b=game.business[i];
let price=b.cost*2;

if(game.money<price)return;

game.money-=price;
b.upgrade++;

game.income+=b.income;
}

function drawBiz(){
let d=document.getElementById("biz");
d.innerHTML="";

game.business.forEach((b,i)=>{

d.innerHTML+=`
<div class="panel">
<b>${b.name}</b><br>
–¶–µ–Ω–∞: ${b.cost}$<br>
–î–æ—Ö–æ–¥: ${b.income*(b.upgrade+1)}<br>
–í–ª–∞–¥–µ–Ω–∏–µ: x${b.owned}<br>
–ê–ø–≥—Ä–µ–π–¥: ${b.upgrade}
<br>
<button onclick="buyBiz(${i})">–ö—É–ø–∏—Ç—å</button>
<button class="blue" onclick="upgradeBiz(${i})">
–ê–ø–≥—Ä–µ–π–¥ (${b.cost*2}$)
</button>
</div>
`;
});
}

//////////////// MANAGERS //////////////////

function hireManager(i){
let b=game.business[i];
let price=b.cost*5;

if(game.money<price||b.manager)return;

game.money-=price;
b.manager=true;
}

function managerTick(){
game.business.forEach((b,i)=>{
if(b.manager && game.money>=b.cost){
buyBiz(i);
}
});
}

function drawManagers(){
let d=document.getElementById("managers");
d.innerHTML="";

game.business.forEach((b,i)=>{

d.innerHTML+=`
<button onclick="hireManager(${i})">
${b.name}: ${b.manager?"‚úÖ":"–ù–∞–Ω—è—Ç—å ("+b.cost*5+"$)"}
</button><br>
`;
});
}

//////////////// LOOP //////////////////

setInterval(()=>{

managerTick();
economyTick();

game.money+=game.income*game.bonus*game.economy;

updateLevel();
update();

},1000);

//////////////// UI //////////////////

function update(){

document.getElementById("money").innerText=Math.floor(game.money);
document.getElementById("income").innerText=
Math.floor(game.income*game.economy);
document.getElementById("level").innerText=game.level;
document.getElementById("bonus").innerText=
game.bonus.toFixed(1);

drawBiz();
drawManagers();
save();
}

//////////////// START //////////////////

load();
setEconomyText("–°—Ç–∞–±–∏–ª—å–Ω–æ");
update();

</script>
</body>
</html>
























































































































































