<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>–ö–ª–∏–∫–µ—Ä –ë–æ–º–∂–∞ PRO 4.2</title>

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff;text-align:center}
.panel{border:2px solid #222;margin:6px;padding:6px;border-radius:10px}
button{padding:8px;margin:4px;border:none;border-radius:8px;cursor:pointer}
.green{background:#2ecc71}
.red{background:#e74c3c}
.blue{background:#3498db}
</style>
</head>

<body>

<h2>üî• –ö–ª–∏–∫–µ—Ä –ë–æ–º–∂–∞ PRO 4.2</h2>

<div class="panel">
üí∞ –î–µ–Ω—å–≥–∏: <span id="money"></span><br>
üè¢ –î–æ—Ö–æ–¥/—Å–µ–∫: <span id="income"></span><br>
‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level"></span><br>
‚ö° –ë–æ–Ω—É—Å: x<span id="bonus"></span><br>
üåç –≠–∫–æ–Ω–æ–º–∏–∫–∞: <span id="economy"></span>
</div>

<button class="green" onclick="clickMoney()">–ö–ª–∏–∫</button>

<div class="panel">
<h3>üè¢ –ë–∏–∑–Ω–µ—Å</h3>
<div id="biz"></div>
</div>

<div class="panel">
<h3>üëî –ú–µ–Ω–µ–¥–∂–µ—Ä—ã</h3>
<div id="managers"></div>
</div>

<script>

//////////////// GAME //////////////////

const baseGame={
money:0,
income:0,
clickPower:1,

level:1,
bonus:1,

economy:1,
crisisTimer:0,

business:[
{name:"–ö–∏–æ—Å–∫",cost:100,income:2,owned:0,upgrade:0,manager:false},
{name:"–ú–∞–≥–∞–∑–∏–Ω",cost:500,income:6,owned:0,upgrade:0,manager:false},
{name:"–ö–∞—Ñ–µ",cost:2000,income:15,owned:0,upgrade:0,manager:false},
{name:"–ó–∞–≤–æ–¥",cost:8000,income:40,owned:0,upgrade:0,manager:false},
{name:"–ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è",cost:40000,income:120,owned:0,upgrade:0,manager:false}
],

lastTime:Date.now()
};

let game;

//////////////// SAVE //////////////////

function save(){
game.lastTime=Date.now();
localStorage.setItem("beggarV42",JSON.stringify(game));
}

function load(){
let s=localStorage.getItem("beggarV42");
game=s?Object.assign(structuredClone(baseGame),JSON.parse(s))
:structuredClone(baseGame);

let offlineSec=Math.floor((Date.now()-game.lastTime)/1000);
offlineSec=Math.min(offlineSec,28800);

if(offlineSec>0){
let earn=offlineSec*game.income*game.bonus*game.economy;
game.money+=earn;
alert("‚è≥ –û—Ñ—Ñ–ª–∞–π–Ω –¥–æ—Ö–æ–¥: +"+Math.floor(earn)+"$");
}
}

//////////////// CLICK //////////////////

function clickMoney(){
game.money+=game.clickPower*game.bonus;
updateLevel();
update();
}

//////////////// LEVEL //////////////////

function updateLevel(){
let lvl=Math.floor(Math.log10(game.money+1))+1;
if(lvl>game.level){
game.level=lvl;
game.bonus=1+(game.level-1)*0.1;
}
}

//////////////// ECONOMY //////////////////

function economyTick(){

game.crisisTimer++;

if(game.crisisTimer>20){

game.crisisTimer=0;

let r=Math.random();

if(r<0.25){
game.economy=0.5;
setEconomyText("üí• –ö–†–ò–ó–ò–°");
}
else if(r<0.5){
game.economy=0.8;
setEconomyText("üìâ –°–ø–∞–¥");
}
else if(r<0.75){
game.economy=1.2;
setEconomyText("üìà –†–æ—Å—Ç");
}
else{
game.economy=1.5;
setEconomyText("üöÄ –ë—É–º");
}
}
}

function setEconomyText(text){
document.getElementById("economy").innerText=text;
}

//////////////// BUSINESS //////////////////

function buyBiz(i){
let b=game.business[i];
if(game.money<b.cost)return;

game.money-=b.cost;
b.owned++;

game.income+=b.income*(b.upgrade+1);
b.cost=Math.floor(b.cost*1.5);
}

function upgradeBiz(i){
let b=game.business[i];
let price=b.cost*2;

if(game.money<price)return;

game.money-=price;
b.upgrade++;

game.income+=b.income;
}

function drawBiz(){
let d=document.getElementById("biz");
d.innerHTML="";

game.business.forEach((b,i)=>{

d.innerHTML+=`
<div class="panel">
<b>${b.name}</b><br>
–¶–µ–Ω–∞: ${b.cost}$<br>
–î–æ—Ö–æ–¥: ${b.income*(b.upgrade+1)}<br>
–í–ª–∞–¥–µ–Ω–∏–µ: x${b.owned}<br>
–ê–ø–≥—Ä–µ–π–¥: ${b.upgrade}
<br>
<button onclick="buyBiz(${i})">–ö—É–ø–∏—Ç—å</button>
<button class="blue" onclick="upgradeBiz(${i})">
–ê–ø–≥—Ä–µ–π–¥ (${b.cost*2}$)
</button>
</div>
`;
});
}

//////////////// MANAGERS //////////////////

function hireManager(i){
let b=game.business[i];
let price=b.cost*5;

if(game.money<price||b.manager)return;

game.money-=price;
b.manager=true;
}

function managerTick(){
game.business.forEach((b,i)=>{
if(b.manager && game.money>=b.cost){
buyBiz(i);
}
});
}

function drawManagers(){
let d=document.getElementById("managers");
d.innerHTML="";

game.business.forEach((b,i)=>{

d.innerHTML+=`
<button onclick="hireManager(${i})">
${b.name}: ${b.manager?"‚úÖ":"–ù–∞–Ω—è—Ç—å ("+b.cost*5+"$)"}
</button><br>
`;
});
}

//////////////// LOOP //////////////////

setInterval(()=>{

managerTick();
economyTick();

game.money+=game.income*game.bonus*game.economy;

updateLevel();
update();

},1000);

//////////////// UI //////////////////

function update(){

document.getElementById("money").innerText=Math.floor(game.money);
document.getElementById("income").innerText=
Math.floor(game.income*game.economy);
document.getElementById("level").innerText=game.level;
document.getElementById("bonus").innerText=
game.bonus.toFixed(1);

drawBiz();
drawManagers();
save();
}

//////////////// START //////////////////

load();
setEconomyText("–°—Ç–∞–±–∏–ª—å–Ω–æ");
update();

</script>
</body>
</html>




















































































































































